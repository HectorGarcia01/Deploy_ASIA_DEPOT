"use strict";(self.webpackChunkFrontend_ASIA_DEPOT=self.webpackChunkFrontend_ASIA_DEPOT||[]).push([[462],{462:(ce,U,l)=>{l.r(U),l.d(U,{UserProfileModule:()=>le});var d=l(6895),i=l(433),g=l(5808),c=l(1548),e=l(8256),C=l(9616),S=l(6785),q=l(69),y=l(870),h=l(6428),f=l(2150),_=l(3310);let O=(()=>{class r{constructor(t,o,s,a,u){this.authService=t,this.userService=o,this.sharedService=s,this.newsletterService=a,this.customAlertService=u,this.customer={},this.image="assets/transparent.png"}ngOnInit(){this.scrollToTop(),this.viewProfile(),this.getProfilePicture()}viewProfile(){try{this.userService.getCustomerProfile(`${c.Q}/usuario/ver/perfil`).subscribe({next:t=>{this.customer=t.customer},error:t=>{this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})}catch(t){console.log(t.error)}}getProfilePicture(){try{this.authService.isAuthenticated()?this.userService.getProfilePhoto(`${c.Q}/usuario/ver/avatar`).subscribe({next:t=>{this.image=URL.createObjectURL(t)},error:t=>{this.image="assets/perfil_picture.png"}}):this.image="assets/perfil_picture.png"}catch(t){console.log(t.error)}}deleteProfilePicture(){try{this.userService.deleteProfilePhoto(`${c.Q}/usuario/eliminar/avatar`).subscribe({next:t=>{this.image="assets/perfil_picture.png",this.customAlertService.sweetAlertPersonalizada("success","Exitoso",t.msg),this.sharedService.profileImageUpdated.emit("assets/perfil_picture.png")},error:t=>{this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})}catch(t){console.log(t.error)}}unsubscriptionNewsletter(){try{this.newsletterService.unsubscriptionNewsletter(`${c.Q}/usuario/anular/suscripcion/newsletter`).subscribe({next:t=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",t.msg)},error:t=>{this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})}catch(t){console.log(t.error)}}logout(){try{this.authService.logout().subscribe({next:t=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",t.msg),this.authService.deleteCookie()},error:t=>{this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})}catch(t){console.log(t.error)}}logoutAll(){try{this.authService.logoutAll().subscribe({next:t=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",t.msg),this.authService.deleteCookie()},error:t=>{this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})}catch(t){console.log(t.error)}}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.e),e.Y36(S.v),e.Y36(q.F),e.Y36(y.B),e.Y36(h.y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-profile"]],decls:94,vars:15,consts:[[1,"container"],[1,"row","d-flex","justify-content-center"],[1,"col-md-9","bg-light","mb-3"],[1,"d-flex","flex-column","flex-md-row","align-items-center","justify-content-center"],[1,"col-md-4"],["width","70%","alt","Foto-Perfil",1,"img-fluid","rounded-circle",3,"src"],[1,"col-md-6"],[1,"col-md-9","mb-5"],[1,"d-flex","flex-column","flex-md-row","align-items-center","justify-content-between"],[1,"col-md-6","bg-light","p-5","mb-5","container-info"],[1,"mb-4"],[1,"mb-3"],["for","nombre"],["id","nombre"],["for","apellido"],["id","apellido"],["for","correo"],["id","correo"],["for","telefono"],["id","telefono"],["for","nit"],["id","nit"],["for","departamento"],["id","departamento"],["for","municipio"],["id","municipio"],["for","direccion_general"],["id","direccion_general"],[1,"col-md-5","bg-light","p-5"],[1,"d-flex","flex-column","btnAction"],[1,"btn","btn-primary","btn-block",3,"routerLink"],[1,"btn","btn-danger","btn-block",3,"click"]],template:function(t,o){1&t&&(e._UZ(0,"app-nav-bar"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"img",5),e.qZA(),e.TgZ(7,"div",6)(8,"h1"),e._uU(9),e.qZA(),e.TgZ(10,"h1"),e._uU(11),e.qZA()()()(),e.TgZ(12,"div",7)(13,"div",8)(14,"div",9)(15,"h3",10),e._uU(16,"Informaci\xf3n personal"),e.qZA(),e.TgZ(17,"div",11)(18,"label",12)(19,"strong"),e._uU(20,"Nombre"),e.qZA()(),e.TgZ(21,"p",13),e._uU(22),e.qZA()(),e.TgZ(23,"div",11)(24,"label",14)(25,"strong"),e._uU(26,"Apellido"),e.qZA()(),e.TgZ(27,"p",15),e._uU(28),e.qZA()(),e.TgZ(29,"div",11)(30,"label",16)(31,"strong"),e._uU(32,"Correo"),e.qZA()(),e.TgZ(33,"p",17),e._uU(34),e.qZA()(),e.TgZ(35,"div",11)(36,"label",18)(37,"strong"),e._uU(38,"Tel\xe9fono"),e.qZA()(),e.TgZ(39,"p",19),e._uU(40),e.qZA()(),e.TgZ(41,"div",11)(42,"label",20)(43,"strong"),e._uU(44,"NIT"),e.qZA()(),e.TgZ(45,"p",21),e._uU(46),e.qZA()(),e.TgZ(47,"div",11)(48,"label",22)(49,"strong"),e._uU(50,"Departamento"),e.qZA()(),e.TgZ(51,"p",23),e._uU(52),e.qZA()(),e.TgZ(53,"div",11)(54,"label",24)(55,"strong"),e._uU(56,"Municipio"),e.qZA()(),e.TgZ(57,"p",25),e._uU(58),e.qZA()(),e.TgZ(59,"div",11)(60,"label",26)(61,"strong"),e._uU(62,"Direcci\xf3n general"),e.qZA()(),e.TgZ(63,"p",27),e._uU(64),e.qZA()()(),e.TgZ(65,"div",28)(66,"h3",10),e._uU(67,"Acciones"),e.qZA(),e.TgZ(68,"div",29)(69,"div",11)(70,"a",30),e._uU(71,"Actualizar Datos"),e.qZA()(),e.TgZ(72,"div",11)(73,"a",30),e._uU(74,"Cambiar Contrase\xf1a"),e.qZA()(),e.TgZ(75,"div",11)(76,"a",30),e._uU(77,"Productos Favoritos"),e.qZA()(),e.TgZ(78,"div",11)(79,"a",30),e._uU(80,"Historial de Compras"),e.qZA()(),e.TgZ(81,"div",11)(82,"a",31),e.NdJ("click",function(){return o.deleteProfilePicture()}),e._uU(83,"Borrar Foto de Perfil"),e.qZA()(),e.TgZ(84,"div",11)(85,"a",31),e.NdJ("click",function(){return o.unsubscriptionNewsletter()}),e._uU(86,"Anular Suscripci\xf3n del Newsletter"),e.qZA()(),e.TgZ(87,"div",11)(88,"a",31),e.NdJ("click",function(){return o.logout()}),e._uU(89,"Cerrar Sesi\xf3n"),e.qZA()(),e.TgZ(90,"div",11)(91,"a",31),e.NdJ("click",function(){return o.logoutAll()}),e._uU(92,"Cerrar Todas las Sesiones"),e.qZA()()()()()()()(),e._UZ(93,"app-footer")),2&t&&(e.xp6(6),e.s9C("src",o.image,e.LSH),e.xp6(3),e.Oqu(o.customer.Nombre_Cliente),e.xp6(2),e.Oqu(o.customer.Apellido_Cliente),e.xp6(11),e.Oqu(o.customer.Nombre_Cliente),e.xp6(6),e.Oqu(o.customer.Apellido_Cliente),e.xp6(6),e.Oqu(o.customer.Correo_Cliente),e.xp6(6),e.Oqu(o.customer.Telefono_Cliente),e.xp6(6),e.Oqu(o.customer.NIT_Cliente),e.xp6(6),e.Oqu(null==o.customer.municipio||null==o.customer.municipio.departamento?null:o.customer.municipio.departamento.Nombre_Departamento),e.xp6(6),e.Oqu(null==o.customer.municipio?null:o.customer.municipio.Nombre_Municipio),e.xp6(6),e.Oqu(o.customer.Direccion_General),e.xp6(6),e.Q6J("routerLink","/profile/update"),e.xp6(3),e.Q6J("routerLink","/profile/change-password"),e.xp6(3),e.Q6J("routerLink","/profile/favorite/products"),e.xp6(3),e.Q6J("routerLink","/profile/shopping/historymit -"))},dependencies:[g.rH,f.w,_.c],styles:[".btnAction[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{max-width:300px;width:100%}"]}),r})();function w(r,n){1&r&&(e.TgZ(0,"div",37),e._uU(1," El nombre es demasiado corto (m\xednimo 3 car\xe1cteres). "),e.qZA())}function E(r,n){1&r&&(e.TgZ(0,"div",37),e._uU(1," El nombre es demasiado largo (m\xe1ximo 30 car\xe1cteres). "),e.qZA())}function I(r,n){1&r&&(e.TgZ(0,"div",37),e._uU(1," El nombre no es v\xe1lido, no use car\xe1cteres especiales. "),e.qZA())}function M(r,n){1&r&&(e.TgZ(0,"div",37),e._uU(1," El apellido es demasiado corto (m\xednimo 3 car\xe1cteres). "),e.qZA())}function N(r,n){1&r&&(e.TgZ(0,"div",37),e._uU(1," El apellido es demasiado largo (m\xe1ximo 30 car\xe1cteres). "),e.qZA())}function k(r,n){1&r&&(e.TgZ(0,"div",37),e._uU(1," El apellido no es v\xe1lido, no use car\xe1cteres especiales. "),e.qZA())}function J(r,n){1&r&&(e.TgZ(0,"div",37),e._uU(1," El tel\xe9fono no es v\xe1lido, debe de poseer 8 d\xedgitos. "),e.qZA())}function Q(r,n){1&r&&(e.TgZ(0,"div",37),e._uU(1," El NIT no es v\xe1lido. "),e.qZA())}function D(r,n){if(1&r&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",t.Nombre_Departamento," ")}}function Y(r,n){if(1&r&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.Nombre_Municipio)}}function z(r,n){1&r&&(e.TgZ(0,"div",37),e._uU(1," La direcci\xf3n no es v\xe1lida, no use car\xe1cteres especiales. "),e.qZA())}function j(r,n){1&r&&(e.TgZ(0,"div",37),e._uU(1," La direcci\xf3n es demasiado corta (m\xednimo 10 car\xe1cteres). "),e.qZA())}function L(r,n){1&r&&(e.TgZ(0,"div",37),e._uU(1," La direcci\xf3n es demasiado larga (m\xe1ximo 100 car\xe1cteres). "),e.qZA())}let H=(()=>{class r{constructor(t,o,s,a,u){this.fb=t,this.authService=o,this.userService=s,this.customAlertService=a,this.router=u,this.departments=[],this.selectedDepartmentId=null,this.selectedMunicipalityId=null,this.municipalities=[],this.image="assets/transparent.png",this.uploading=!1,this.previewImage=null,this.validateForm()}ngOnInit(){this.scrollToTop(),this.getProfilePicture(),this.getAddresses()}getProfilePicture(){try{this.authService.isAuthenticated()?this.userService.getProfilePhoto(`${c.Q}/usuario/ver/avatar`).subscribe({next:t=>{this.image=URL.createObjectURL(t)},error:t=>{this.image="assets/perfil_picture.png"}}):this.image="assets/perfil_picture.png"}catch(t){console.log(t.error)}}getAddresses(){this.userService.getAddress(`${c.Q}/usuario/ver/direcciones`).subscribe(t=>{this.departments=t.address})}onDepartmentSelected(t){const o=t.target.value;if(null!==o){this.selectedDepartmentId=Number(o);const s=this.departments.find(a=>a.id===this.selectedDepartmentId);this.municipalities=s?s.municipios:[]}else this.municipalities=[];this.updateForm.get("municipio")?.setValue(null)}validateForm(){this.updateForm=new i.cw({nombre:new i.NI("",[i.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\xfc\xdc\s]+$/),i.kI.minLength(3),i.kI.maxLength(30)]),apellido:new i.NI("",[i.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\xfc\xdc\s]+$/),i.kI.minLength(3),i.kI.maxLength(30)]),telefono:new i.NI("",[i.kI.pattern(/^[345][0-9]{7}$/)]),nit:new i.NI("",[i.kI.pattern("^[0-9]+$")]),direccion:new i.NI("",[i.kI.pattern(/^[^[\]<>(){}_=\\|';]+$/),i.kI.minLength(10),i.kI.maxLength(100)]),departamento:new i.NI(null,[i.kI.pattern("^[0-9]+$")]),municipio:new i.NI(null,[i.kI.pattern("^[0-9]+$")])})}getUserData(){const t={Nombre_Cliente:this.updateForm.get("nombre")?.value,Apellido_Cliente:this.updateForm.get("apellido")?.value,Telefono_Cliente:this.updateForm.get("telefono")?.value,NIT_Cliente:this.updateForm.get("nit")?.value,Direccion_General:this.updateForm.get("direccion")?.value,ID_Departamento_FK:this.updateForm.get("departamento")?.value,ID_Municipio_FK:this.updateForm.get("municipio")?.value};for(const o in t)t.hasOwnProperty(o)&&(null==t[o]||""===t[o])&&delete t[o];return 0===Object.keys(t).length?null:t}onSubmit(){try{if(this.updateForm.valid){const t=this.getUserData();if(t?.ID_Departamento_FK&&!t?.ID_Municipio_FK)return this.customAlertService.sweetAlertPersonalizada("error","Datos incompletos","Debes escoger un municipio.");if(!t)return this.customAlertService.sweetAlertPersonalizada("success","Sin cambios","No has realizado ning\xfan cambio."),this.router.navigate(["/profile"]);this.userService.updateCustomer(`${c.Q}/usuario/actualizar/perfil`,t).subscribe({next:o=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",o.msg),this.updateForm.reset(),this.router.navigate(["/profile"])},error:o=>{this.customAlertService.sweetAlertPersonalizada("error","Error",o.error.error)}})}else this.customAlertService.sweetAlertPersonalizada("error","Error","Por favor, verifica los campos del formulario.")}catch(t){console.log(t.error)}}onUploadAvatar(){try{this.selectedFile?(this.uploading=!0,this.userService.uploadProfilePhoto(`${c.Q}/usuario/subir/avatar`,this.selectedFile).subscribe({next:t=>{this.uploading=!1,this.customAlertService.sweetAlertPersonalizada("success","Exitoso",t.msg),this.router.navigate(["/profile"])},error:t=>{this.uploading=!1,this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})):this.customAlertService.sweetAlertPersonalizada("error","Im\xe1gen no seleccionada","Por favor selecciona una im\xe1gen.")}catch(t){console.log(t.error)}}onFileSelected(t){const o=t.target;if(o.files&&o.files.length>0){const s=o.files[0],a=s.name.split(".").pop()?.toLowerCase();if(a)if(["jpg","jpeg","png"].includes(a)){this.selectedFile=s;const p=new FileReader;p.onload=m=>{this.previewImage=m.target?.result},p.readAsDataURL(s)}else this.customAlertService.sweetAlertPersonalizada("error","Archivo no v\xe1lido","Selecciona un archivo con una extensi\xf3n v\xe1lida (.jpg, .jpeg o .png).");else this.customAlertService.sweetAlertPersonalizada("error","Archivo no v\xe1lido","No se pudo determinar la extensi\xf3n del archivo.")}}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(i.qu),e.Y36(C.e),e.Y36(S.v),e.Y36(h.y),e.Y36(g.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-update-profile"]],decls:71,vars:16,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-12","mb-5"],[1,"d-flex","flex-column","flex-md-row","align-items-center","justify-content-center"],[1,"col-md-4","bg-light","p-5","mb-5",2,"margin-right","20px"],[1,"d-flex","justify-content-center"],["alt","Foto de Perfil",1,"img-fluid","rounded-circle",2,"max-width","250px","max-height","250px",3,"src"],[3,"ngSubmit"],[1,"mt-3"],[1,"form-group"],["id","formFile","type","file","accept",".png, .jpg, .jpeg","name","avatar","required","",1,"mt-3","form-control",3,"change"],[1,"row","mb-4"],[1,"col-md-12","d-flex","justify-content-center","mt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"col-md-5","bg-light","p-5","mb-5"],[1,"text-center","mb-3"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","formControlName","nombre","placeholder","Ingresa tu nombre",1,"form-control"],["for","registerName"],["class","text-danger",4,"ngIf"],["type","text","formControlName","apellido","placeholder","Ingresa tu apellido",1,"form-control"],["for","registerUsername"],["type","text","formControlName","telefono","placeholder","Ingresa tu n\xfamero de tel\xe9fono",1,"form-control"],["for","registerTel"],["type","number","formControlName","nit","placeholder","Ingresa tu NIT",1,"form-control"],["for","registerNIT"],["aria-label","Default select example","formControlName","departamento",1,"form-select",3,"change"],["value","null"],[3,"value",4,"ngFor","ngForOf"],["for","registerDepartamento"],["aria-label","Default select example","formControlName","municipio",1,"form-select"],["for","registerMunicipio"],["id","floatingTextarea2","minlength","10","maxlength","101","formControlName","direccion","placeholder","Ingresa tu direcci\xf3n general",1,"form-control",2,"max-height","100px"],["for","registerAddress"],[1,"col-md-12","d-flex","justify-content-center","mt-3"],["type","submit",1,"btn","btn-primary","btn-block","w-75"],[1,"text-danger"],[3,"value"]],template:function(t,o){if(1&t&&(e._UZ(0,"app-nav-bar"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"img",6),e.qZA(),e.TgZ(8,"form",7),e.NdJ("ngSubmit",function(){return o.onUploadAvatar()}),e.TgZ(9,"div",8)(10,"div",9)(11,"input",10),e.NdJ("change",function(a){return o.onFileSelected(a)}),e.qZA()(),e.TgZ(12,"div",11)(13,"div",12)(14,"button",13),e._uU(15,"Subir Foto"),e.qZA()()()()()(),e.TgZ(16,"div",14)(17,"div",15)(18,"h2"),e._uU(19,"Actualizar datos personales"),e.qZA()(),e.TgZ(20,"form",16),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(21,"div",17),e._UZ(22,"input",18),e.TgZ(23,"label",19),e._uU(24,"Nombre"),e.qZA(),e.YNc(25,w,2,0,"div",20),e.YNc(26,E,2,0,"div",20),e.YNc(27,I,2,0,"div",20),e.qZA(),e.TgZ(28,"div",17),e._UZ(29,"input",21),e.TgZ(30,"label",22),e._uU(31,"Apellido"),e.qZA(),e.YNc(32,M,2,0,"div",20),e.YNc(33,N,2,0,"div",20),e.YNc(34,k,2,0,"div",20),e.qZA(),e.TgZ(35,"div",17),e._UZ(36,"input",23),e.TgZ(37,"label",24),e._uU(38,"Tel\xe9fono"),e.qZA(),e.YNc(39,J,2,0,"div",20),e.qZA(),e.TgZ(40,"div",17),e._UZ(41,"input",25),e.TgZ(42,"label",26),e._uU(43,"NIT"),e.qZA(),e.YNc(44,Q,2,0,"div",20),e.qZA(),e.TgZ(45,"div",17)(46,"select",27),e.NdJ("change",function(a){return o.onDepartmentSelected(a)}),e.TgZ(47,"option",28),e._uU(48,"Selecciona un departamento"),e.qZA(),e.YNc(49,D,2,2,"option",29),e.qZA(),e.TgZ(50,"label",30),e._uU(51,"Departamento"),e.qZA()(),e.TgZ(52,"div",17)(53,"select",31)(54,"option",28),e._uU(55,"Selecciona un municipio"),e.qZA(),e.YNc(56,Y,2,2,"option",29),e.qZA(),e.TgZ(57,"label",32),e._uU(58,"Municipio"),e.qZA()(),e.TgZ(59,"div",17),e._UZ(60,"textarea",33),e.TgZ(61,"label",34),e._uU(62,"Direcci\xf3n general"),e.qZA(),e.YNc(63,z,2,0,"div",20),e.YNc(64,j,2,0,"div",20),e.YNc(65,L,2,0,"div",20),e.qZA(),e.TgZ(66,"div",11)(67,"div",35)(68,"button",36),e._uU(69,"Actualizar datos"),e.qZA()()()()()()()()(),e._UZ(70,"app-footer")),2&t){let s,a,u,p,m,v,b,Z,A,P,T;e.xp6(7),e.s9C("src",o.previewImage||o.image,e.LSH),e.xp6(7),e.Q6J("disabled",o.uploading),e.xp6(6),e.Q6J("formGroup",o.updateForm),e.xp6(5),e.Q6J("ngIf",(null==(s=o.updateForm.get("nombre"))?null:s.hasError("minlength"))&&(null==(s=o.updateForm.get("nombre"))?null:s.touched)),e.xp6(1),e.Q6J("ngIf",(null==(a=o.updateForm.get("nombre"))?null:a.hasError("maxlength"))&&(null==(a=o.updateForm.get("nombre"))?null:a.touched)),e.xp6(1),e.Q6J("ngIf",(null==(u=o.updateForm.get("nombre"))?null:u.hasError("pattern"))&&(null==(u=o.updateForm.get("nombre"))?null:u.touched)),e.xp6(5),e.Q6J("ngIf",(null==(p=o.updateForm.get("apellido"))?null:p.hasError("minlength"))&&(null==(p=o.updateForm.get("apellido"))?null:p.touched)),e.xp6(1),e.Q6J("ngIf",(null==(m=o.updateForm.get("apellido"))?null:m.hasError("maxlength"))&&(null==(m=o.updateForm.get("apellido"))?null:m.touched)),e.xp6(1),e.Q6J("ngIf",(null==(v=o.updateForm.get("apellido"))?null:v.hasError("pattern"))&&(null==(v=o.updateForm.get("apellido"))?null:v.touched)),e.xp6(5),e.Q6J("ngIf",(null==(b=o.updateForm.get("telefono"))?null:b.hasError("pattern"))&&(null==(b=o.updateForm.get("telefono"))?null:b.touched)),e.xp6(5),e.Q6J("ngIf",(null==(Z=o.updateForm.get("nit"))?null:Z.hasError("pattern"))&&(null==(Z=o.updateForm.get("nit"))?null:Z.touched)),e.xp6(5),e.Q6J("ngForOf",o.departments),e.xp6(7),e.Q6J("ngForOf",o.municipalities),e.xp6(7),e.Q6J("ngIf",(null==(A=o.updateForm.get("direccion"))?null:A.hasError("pattern"))&&(null==(A=o.updateForm.get("direccion"))?null:A.touched)),e.xp6(1),e.Q6J("ngIf",(null==(P=o.updateForm.get("direccion"))?null:P.hasError("minlength"))&&(null==(P=o.updateForm.get("direccion"))?null:P.touched)),e.xp6(1),e.Q6J("ngIf",(null==(T=o.updateForm.get("direccion"))?null:T.hasError("maxlength"))&&(null==(T=o.updateForm.get("direccion"))?null:T.touched))}},dependencies:[d.sg,d.O5,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.EJ,i.JJ,i.JL,i.wO,i.nD,i.sg,i.u,i.F,f.w,_.c]}),r})();var $=l(3809),F=l(3650);function K(r,n){1&r&&(e.TgZ(0,"div",9)(1,"div",10)(2,"h5"),e._uU(3," No posees ning\xfan producto en favoritos, intenta agregar unos. "),e.qZA(),e._UZ(4,"img",11),e.qZA()())}function R(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw();return e.KtG(a.addProductCart(s.producto.id))}),e._UZ(1,"i",31),e.qZA()}}function V(r,n){1&r&&(e.TgZ(0,"button",32),e._UZ(1,"i",31),e.qZA())}const x=function(r){return["/product/detail",r]};function B(r,n){if(1&r&&(e.TgZ(0,"a",33),e._uU(1,"Ver detalles"),e.qZA()),2&r){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,x,t.producto.id))}}function G(r,n){1&r&&(e.TgZ(0,"button",34),e._uU(1,"Agotado"),e.qZA())}function X(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"div",14),e._UZ(3,"img",15),e.TgZ(4,"div",16),e.YNc(5,R,2,0,"button",17),e.YNc(6,V,2,0,"button",18),e.TgZ(7,"button",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.deleteFavoriteProduct(a.id))}),e._UZ(8,"i",20),e.qZA(),e.TgZ(9,"button",21),e._UZ(10,"i",22),e.qZA()()(),e.TgZ(11,"div",23)(12,"a",24)(13,"h4"),e._uU(14),e.qZA()(),e.TgZ(15,"h5"),e._uU(16),e.qZA(),e.TgZ(17,"div",25)(18,"h5",26),e._uU(19),e.qZA(),e.TgZ(20,"h6",27)(21,"del"),e._uU(22),e.qZA()()(),e.TgZ(23,"div",28),e.YNc(24,B,2,3,"a",29),e.YNc(25,G,2,0,"button",30),e.qZA()()()()}if(2&r){const t=n.$implicit;e.xp6(5),e.Q6J("ngIf",t.producto.Cantidad_Stock>0),e.xp6(1),e.Q6J("ngIf",0==t.producto.Cantidad_Stock),e.xp6(3),e.Q6J("routerLink",e.VKq(10,x,t.producto.id)),e.xp6(3),e.Q6J("routerLink",e.VKq(12,x,t.id)),e.xp6(2),e.Oqu(t.producto.Nombre_Producto),e.xp6(2),e.hij("Cantidad disponible: ",t.producto.Cantidad_Stock,""),e.xp6(3),e.hij("Q",t.producto.Precio_Venta,""),e.xp6(3),e.hij("Q",t.producto.Precio_Venta,""),e.xp6(2),e.Q6J("ngIf",t.producto.Cantidad_Stock>0),e.xp6(1),e.Q6J("ngIf",0==t.producto.Cantidad_Stock)}}function ee(r,n){1&r&&(e.TgZ(0,"div",6)(1,"div",7)(2,"h5"),e._uU(3," \xa1Ups! Parece que a\xfan no hay compras realizadas. \xa1An\xedmate a explorar nuestra tienda y descubrir nuestros incre\xedbles productos! "),e.qZA(),e._UZ(4,"img",8),e.qZA()())}function te(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.cancelSale(s.id))}),e._UZ(1,"i",20),e.qZA()}}function oe(r,n){1&r&&(e.TgZ(0,"button",21),e._UZ(1,"i",20),e.qZA())}function re(r,n){if(1&r&&(e.TgZ(0,"tr")(1,"td",14),e._uU(2),e.qZA(),e.TgZ(3,"td",14),e._uU(4),e.qZA(),e.TgZ(5,"td",14),e._uU(6),e.qZA(),e.TgZ(7,"td",14),e._uU(8),e.qZA(),e.TgZ(9,"td",14),e._uU(10),e.qZA(),e.TgZ(11,"td",14),e._uU(12),e.qZA(),e.TgZ(13,"td",14)(14,"button",15),e._UZ(15,"i",16),e.qZA()(),e.TgZ(16,"td",14),e.YNc(17,te,2,0,"button",17),e.YNc(18,oe,2,0,"button",18),e.qZA()()),2&r){const t=n.$implicit,o=n.index,s=e.oxw(2);e.xp6(2),e.Oqu(t.Numero_Orden),e.xp6(2),e.Oqu(s.countProducts[o]),e.xp6(2),e.hij("Q.",t.Total_Factura,""),e.xp6(2),e.AsE(" ",t.cliente.Nombre_Cliente," ",t.cliente.Apellido_Cliente," "),e.xp6(2),e.Oqu(t.estado.Tipo_Estado),e.xp6(2),e.Oqu(t.createdAt),e.xp6(5),e.Q6J("ngIf","Pendiente"===t.estado.Tipo_Estado),e.xp6(1),e.Q6J("ngIf","Pendiente"!==t.estado.Tipo_Estado)}}function ne(r,n){if(1&r&&(e.TgZ(0,"table",9)(1,"thead",10)(2,"tr",11)(3,"th"),e._uU(4,"No. de Orden"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"No. de Productos"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Total"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Cliente"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Estado"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Fecha Registrada"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Ver"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Cancelar"),e.qZA()()(),e.TgZ(19,"tbody",12),e.YNc(20,re,19,9,"tr",13),e.qZA()()),2&r){const t=e.oxw();e.xp6(20),e.Q6J("ngForOf",t.shoppingHistory)}}const ie=[{path:"",redirectTo:"profile",pathMatch:"full"},{path:"profile",component:O},{path:"profile/update",component:H},{path:"profile/favorite/products",component:(()=>{class r{constructor(t,o,s,a){this.authService=t,this.productService=o,this.shoppingCartService=s,this.customAlertService=a,this.product=[],this.noneProducts=!1}ngOnInit(){this.scrollToTop(),this.getFavoriteProducts()}getFavoriteProducts(){if(!this.authService.isAuthenticated())return this.customAlertService.sweetAlertPersonalizada("error","Sin autenticaci\xf3n","Para obtener los products favoritos primero debes de iniciar sesi\xf3n.");this.productService.getFavoriteProducts(`${c.Q}/usuario/ver/productos/favorito`).subscribe({next:t=>{this.product=t.favoriteProduct,this.product=this.product.filter(o=>"Activo"===o.producto.estado.Tipo_Estado),this.noneProducts=!0},error:t=>{this.product=[],this.noneProducts=!1}})}deleteFavoriteProduct(t){try{if(!this.authService.isAuthenticated())return this.customAlertService.sweetAlertPersonalizada("error","Sin autenticaci\xf3n","Para eliminar un producto de favoritos primero debes de iniciar sesi\xf3n.");this.productService.deleteFavoriteProduct(`${c.Q}/usuario/eliminar/producto/favorito`,t).subscribe({next:o=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",o.msg),this.getFavoriteProducts()},error:o=>{this.customAlertService.sweetAlertPersonalizada("error","Error",o.error.error)}})}catch(o){console.log(o.error)}}addProductCart(t){try{if(!this.authService.isAuthenticated())return this.customAlertService.sweetAlertPersonalizada("error","Sin autenticaci\xf3n","Para agregar un producto al carrito primero debes de iniciar sesi\xf3n.");this.shoppingCartService.addProductCart(`${c.Q}/usuario/carrito/agregar`,{ID_Producto_FK:t,Cantidad_Producto:1}).subscribe({next:s=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",s.msg),this.getFavoriteProducts()},error:s=>{this.customAlertService.sweetAlertPersonalizada("error","Error",s.error.error)}})}catch(o){console.log(o.error)}}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.e),e.Y36($.M),e.Y36(F.F),e.Y36(h.y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-favorite-products"]],decls:13,vars:2,consts:[[1,"container-fluid","pt-5","pb-3"],[1,"mx-xl-5","mb-4","text-center"],[1,"col-md-12","mb-5","d-flex","justify-content-center","mt-4"],["role","search",1,"d-flex"],["type","search","placeholder","Bucar producto","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"],[1,"row","px-xl-5"],["class","row justify-content-center align-items-center",4,"ngIf"],["class","col-lg-3 col-md-4 col-sm-6 pb-1",4,"ngFor","ngForOf"],[1,"row","justify-content-center","align-items-center"],[1,"col-12","text-center"],["width","300","height","300","src","assets/404.jpg","alt","Error 404",1,"img-fluid","rounded-circle"],[1,"col-lg-3","col-md-4","col-sm-6","pb-1"],[1,"product-item","bg-light","mb-4"],[1,"product-img","position-relative","overflow-hidden"],["src","assets/Logo_ASIA_DEPOT.png","alt","Logo productos ASIA DEPOT",1,"img-fluid","w-100"],[1,"product-action"],["class","btn btn-outline-dark btn-square",3,"click",4,"ngIf"],["class","btn btn-outline-dark btn-square","disabled","",4,"ngIf"],[1,"btn","btn-outline-dark","btn-square",3,"click"],[1,"fa","fa-heart"],[1,"btn","btn-outline-dark","btn-square",3,"routerLink"],[1,"fa","fa-search"],[1,"text-center","py-4"],[1,"text-decoration-none","text-truncate","productName",3,"routerLink"],[1,"d-flex","align-items-center","justify-content-center","mt-2"],[2,"margin-right","6px"],[1,"text-muted","ml-2"],[1,"container-btn"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],["class","btn btn-danger","disabled","",4,"ngIf"],[1,"fa","fa-shopping-cart"],["disabled","",1,"btn","btn-outline-dark","btn-square"],[1,"btn","btn-primary",3,"routerLink"],["disabled","",1,"btn","btn-danger"]],template:function(t,o){1&t&&(e._UZ(0,"app-nav-bar"),e.TgZ(1,"div",0)(2,"h1",1),e._uU(3,"Productos Favoritos"),e.qZA(),e.TgZ(4,"div",2)(5,"form",3),e._UZ(6,"input",4),e.TgZ(7,"button",5),e._uU(8,"Buscar"),e.qZA()()(),e.TgZ(9,"div",6),e.YNc(10,K,5,0,"div",7),e.YNc(11,X,26,14,"div",8),e.qZA()(),e._UZ(12,"app-footer")),2&t&&(e.xp6(10),e.Q6J("ngIf",0==o.noneProducts),e.xp6(1),e.Q6J("ngForOf",o.product))},dependencies:[d.sg,d.O5,i._Y,i.JL,i.F,g.rH,f.w,_.c],styles:[".product-item[_ngcontent-%COMP%]{transition:.5s}.product-action[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;align-items:center;justify-content:center;transition:.5s}.product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{position:relative;margin:100px 3px 0;opacity:0}.product-item[_ngcontent-%COMP%]:hover{box-shadow:0 0 30px #ddd}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]{background:rgba(255,255,255,.7)}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:first-child{opacity:1;margin-top:0;transition:.3s 0s}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:nth-child(2){opacity:1;margin-top:0;transition:.3s .05s}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:nth-child(3){opacity:1;margin-top:0;transition:.3s .1s}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:nth-child(4){opacity:1;margin-top:0;transition:.3s .15s}.product-item[_ngcontent-%COMP%]   .product-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:.5s}.product-item[_ngcontent-%COMP%]:hover   .product-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.2)}.productName[_ngcontent-%COMP%]{color:#000}.container-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{font-weight:700}.text-primary[_ngcontent-%COMP%]{color:#ffd333!important}"]}),r})()},{path:"profile/shopping/history",component:(()=>{class r{constructor(t,o){this.shoppingCartService=t,this.customAlertService=o,this.shoppingHistory={},this.countProducts=[],this.noneProducts=!1}ngOnInit(){this.getShoppingHistory()}getShoppingHistory(){try{this.shoppingCartService.getShoppingHistory(`${c.Q}/usuario/historial/compras`).subscribe({next:t=>{this.shoppingHistory=t.shoppingHistory,this.countProducts=t.countProducts,this.shoppingHistory.forEach(o=>{if(o.createdAt){const u=o.createdAt.split("T")[0];o.createdAt=u}}),this.noneProducts=!0},error:t=>{this.noneProducts=!1}})}catch(t){console.log(t.error)}}cancelSale(t){try{this.shoppingCartService.cancelCustomerSaleId(`${c.Q}/usuario/compra/cancelar`,t).subscribe({next:o=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",o.msg),this.getShoppingHistory()},error:o=>{this.noneProducts=!1}})}catch(o){console.log(o.error)}}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(F.F),e.Y36(h.y))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-shopping-history"]],decls:9,vars:2,consts:[[1,"container-fluid","mt-4","mb-5"],[1,"mx-xl-5","mb-4","text-center"],[1,"row","px-xl-5"],[1,"col-lg-8","table-responsive","mb-3"],["class","justify-content-center align-items-center",4,"ngIf"],["class","table table-light table-borderless table-hover mb-0",4,"ngIf"],[1,"justify-content-center","align-items-center"],[1,"col-12","text-center"],["width","300","height","300","src","assets/404.jpg","alt","Error 404",1,"img-fluid","rounded-circle"],[1,"table","table-light","table-borderless","table-hover","mb-0"],[1,"thead-dark"],[1,"text-center"],[1,"align-middle"],[4,"ngFor","ngForOf"],[1,"align-middle","text-center"],[1,"btn","btn-sm","btn-primary"],[1,"fa","fa-search"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger","disabled","",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-times"],["disabled","",1,"btn","btn-sm","btn-danger"]],template:function(t,o){1&t&&(e._UZ(0,"app-nav-bar"),e.TgZ(1,"div",0)(2,"h1",1),e._uU(3,"Historial de \xd3rdenes"),e.qZA(),e.TgZ(4,"div",2)(5,"div",3),e.YNc(6,ee,5,0,"div",4),e.YNc(7,ne,21,1,"table",5),e.qZA()()(),e._UZ(8,"app-footer")),2&t&&(e.xp6(6),e.Q6J("ngIf",0==o.noneProducts),e.xp6(1),e.Q6J("ngIf",1==o.noneProducts))},dependencies:[d.sg,d.O5,f.w,_.c],styles:[".table[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;color:#6c757d}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;vertical-align:top;border-top:1px solid #dee2e6}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;border-bottom:2px solid #dee2e6}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] + tbody[_ngcontent-%COMP%]{border-top:2px solid #dee2e6}.table-borderless[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-borderless[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-borderless[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] + tbody[_ngcontent-%COMP%]{border:0}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{color:#6c757d;background-color:#00000013}.table[_ngcontent-%COMP%]   .thead-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff;background-color:#343a40;border-color:#454d55}.table-responsive[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive[_ngcontent-%COMP%] > .table-bordered[_ngcontent-%COMP%]{border:0}"]}),r})()}];let se=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.Bz.forChild(ie),g.Bz]}),r})();var ae=l(335);let le=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[d.ez,i.UX,i.u5,se,ae.d]}),r})()}}]);