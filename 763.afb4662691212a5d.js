"use strict";(self.webpackChunkFrontend_ASIA_DEPOT=self.webpackChunkFrontend_ASIA_DEPOT||[]).push([[763],{5763:(q,d,c)=>{c.r(d),c.d(d,{AuthModule:()=>L});var m=c(6895),r=c(433),l=c(5808),p=c(1548),t=c(8256),A=c(9616),g=c(6428),v=c(2150),h=c(3310);function b(o,i){1&o&&(t.TgZ(0,"div",18),t._uU(1," El correo es obligatorio. "),t.qZA())}function Z(o,i){1&o&&(t.TgZ(0,"div",18),t._uU(1," El correo no es v\xe1lido. "),t.qZA())}function T(o,i){1&o&&(t.TgZ(0,"div",18),t._uU(1," La contrase\xf1a es obligatoria. "),t.qZA())}const F=function(){return["/login"]},_=function(){return["/signup"]},w=function(){return["/login/activate/account"]};let y=(()=>{class o{constructor(n,e,a,s){this.fb=n,this.authService=e,this.customAlertService=a,this.router=s,this.validateForm()}ngOnInit(){this.scrollToTop()}validateForm(){this.loginForm=new r.cw({correo:new r.NI("",[r.kI.required,r.kI.email]),password:new r.NI("",[r.kI.required])})}singIn(){try{if(this.loginForm.valid){const n={correo:this.loginForm.get("correo")?.value,password:this.loginForm.get("password")?.value};this.authService.singIn(`${p.Q}/usuario/login`,n).subscribe({next:e=>{this.authService.saveCookieAuth(e.userToken),this.authService.saveCookieRole(e.userRole),"Admin"===e.userRole||"SuperAdmin"===e.userRole?(this.employeeData=e.user,this.customAlertService.sweetAlertPersonalizada("success","Exitoso",`Bienvenido ${this.employeeData.Nombre_Empleado} ${this.employeeData.Apellido_Empleado}`),this.router.navigate(["/admin"])):(this.customerData=e.user,this.customAlertService.sweetAlertPersonalizada("success","Exitoso",`Bienvenido ${this.customerData.Nombre_Cliente} ${this.customerData.Apellido_Cliente}`),this.router.navigate(["/home"]))},error:e=>{this.customAlertService.sweetAlertPersonalizada("error","Error",e.error.error)}})}else this.customAlertService.sweetAlertPersonalizada("error","Error","Todos los campos son obligatorios")}catch(n){console.log(n.error)}}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(r.qu),t.Y36(A.e),t.Y36(g.y),t.Y36(l.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:38,vars:10,consts:[[1,"container","mt-4","mb-5"],[1,"row","justify-content-center"],[1,"col-md-5"],[1,"tab-content","bg-light","shadow-lg","rounded-5","p-4"],["id","pills-login","role","tabpanel","aria-labelledby","tab-login",1,"tab-pane","fade","show","active"],[1,"p-5",3,"formGroup","ngSubmit"],[1,"text-center","mb-5"],[1,"form-outline","mb-4"],["for","loginName",1,"form-label"],["type","email","formControlName","correo","id","loginName",1,"form-control"],["class","text-danger",4,"ngIf"],["for","loginPassword",1,"form-label"],["type","password","formControlName","password","id","loginPassword",1,"form-control"],[1,"row","mb-4"],[1,"col-md-12","d-flex","justify-content-center"],[3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-block","w-75"],[1,"text-center"],[1,"text-danger"]],template:function(n,e){if(1&n&&(t._UZ(0,"app-nav-bar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"form",5),t.NdJ("ngSubmit",function(){return e.singIn()}),t.TgZ(7,"h1",6),t._uU(8,"Iniciar Sesi\xf3n"),t.qZA(),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Correo"),t.qZA(),t._UZ(12,"input",9),t.YNc(13,b,2,0,"div",10),t.YNc(14,Z,2,0,"div",10),t.qZA(),t.TgZ(15,"div",7)(16,"label",11),t._uU(17,"Contrase\xf1a"),t.qZA(),t._UZ(18,"input",12),t.YNc(19,T,2,0,"div",10),t.qZA(),t.TgZ(20,"div",13)(21,"div",14)(22,"a",15),t._uU(23,"\xbfOlvid\xf3 la contrase\xf1a?"),t.qZA()()(),t.TgZ(24,"div",13)(25,"div",14)(26,"button",16),t._uU(27,"Iniciar sesi\xf3n"),t.qZA()()(),t.TgZ(28,"div",17)(29,"p"),t._uU(30,"\xbfNo posees una cuenta? "),t.TgZ(31,"a",15),t._uU(32,"Reg\xedstrate"),t.qZA()(),t.TgZ(33,"p"),t._uU(34,"\xbfT\xfa cuenta no est\xe1 activa? "),t.TgZ(35,"a",15),t._uU(36,"Act\xedvala"),t.qZA()()()()()()()()(),t._UZ(37,"app-footer")),2&n){let a,s,u;t.xp6(6),t.Q6J("formGroup",e.loginForm),t.xp6(7),t.Q6J("ngIf",(null==(a=e.loginForm.get("correo"))?null:a.hasError("required"))&&(null==(a=e.loginForm.get("correo"))?null:a.touched)),t.xp6(1),t.Q6J("ngIf",(null==(s=e.loginForm.get("correo"))?null:s.hasError("email"))&&(null==(s=e.loginForm.get("correo"))?null:s.touched)),t.xp6(5),t.Q6J("ngIf",(null==(u=e.loginForm.get("password"))?null:u.hasError("required"))&&(null==(u=e.loginForm.get("password"))?null:u.touched)),t.xp6(3),t.Q6J("routerLink",t.DdM(7,F)),t.xp6(9),t.Q6J("routerLink",t.DdM(8,_)),t.xp6(4),t.Q6J("routerLink",t.DdM(9,w))}},dependencies:[m.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,l.rH,v.w,h.c]}),o})();var f=c(529);let S=(()=>{class o{constructor(n){this.http=n}activateAccount(n,e){const a=new f.WM({Authorization:`Bearer ${e}`});return this.http.post(n,null,{headers:a})}}return o.\u0275fac=function(n){return new(n||o)(t.LFG(f.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function C(o,i){1&o&&(t.TgZ(0,"div",17),t._uU(1," El token es obligatorio. "),t.qZA())}function U(o,i){1&o&&(t.TgZ(0,"button",18),t._uU(1,"Activar Cuenta"),t.qZA())}function I(o,i){1&o&&(t.TgZ(0,"button",19),t._UZ(1,"span",20),t._uU(2," Cargando... "),t.qZA())}const E=function(){return["/signup"]},J=function(){return["/login"]},N=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:y},{path:"login/activate/account",component:(()=>{class o{constructor(n,e,a){this.activateAccountService=n,this.customAlertService=e,this.router=a,this.loading=!1,this.validateForm()}ngOnInit(){this.scrollToTop()}validateForm(){this.activateForm=new r.cw({token:new r.NI("",[r.kI.required])})}onSubmit(){try{if(this.activateForm.valid){this.loading=!0;const n=this.activateForm.get("token")?.value;this.activateAccountService.activateAccount(`${p.Q}/usuario/activar/cuenta`,n).subscribe({next:e=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",e.msg),this.loading=!1,this.router.navigate(["/login"])},error:e=>{console.log(e),this.customAlertService.sweetAlertPersonalizada("error","Error","El token es inv\xe1lido"),this.loading=!1}})}else this.customAlertService.sweetAlertPersonalizada("error","Campo vac\xedo","Para activar tu cuenta debes ingresar el token.")}catch(n){console.log(n.error)}}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(S),t.Y36(g.y),t.Y36(l.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-activate-account"]],decls:28,vars:8,consts:[[1,"container","mt-4","mb-5"],[1,"row","justify-content-center"],[1,"col-md-4"],[1,"tab-content","bg-light","shadow-lg","rounded-5"],["id","pills-login","role","tabpanel","aria-labelledby","tab-login",1,"tab-pane","fade","show","active"],[1,"p-5",3,"formGroup","ngSubmit"],[1,"text-center","mb-5"],[1,"form-outline","mb-4"],["for","loginName",1,"form-label"],["type","text","formControlName","token","id","loginName",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"row","mb-4"],[1,"col-md-12","d-flex","justify-content-center"],["type","submit","class","btn btn-primary btn-block w-75",4,"ngIf"],["type","button","class","btn btn-primary btn-block w-75","disabled","",4,"ngIf"],[1,"text-center"],[3,"routerLink"],[1,"text-danger"],["type","submit",1,"btn","btn-primary","btn-block","w-75"],["type","button","disabled","",1,"btn","btn-primary","btn-block","w-75"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(n,e){if(1&n&&(t._UZ(0,"app-nav-bar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"form",5),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(7,"h1",6),t._uU(8,"Activa tu cuenta"),t.qZA(),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Token de activaci\xf3n"),t.qZA(),t._UZ(12,"input",9),t.YNc(13,C,2,0,"div",10),t.qZA(),t.TgZ(14,"div",11)(15,"div",12),t.YNc(16,U,2,0,"button",13),t.YNc(17,I,3,0,"button",14),t.qZA()(),t.TgZ(18,"div",15)(19,"p"),t._uU(20,"\xbfNo posees una cuenta? "),t.TgZ(21,"a",16),t._uU(22,"Reg\xedstrate"),t.qZA()(),t.TgZ(23,"p"),t._uU(24,"\xbfT\xfa cuenta est\xe1 activa? "),t.TgZ(25,"a",16),t._uU(26,"Inicia Sesi\xf3n"),t.qZA()()()()()()()()(),t._UZ(27,"app-footer")),2&n){let a;t.xp6(6),t.Q6J("formGroup",e.activateForm),t.xp6(7),t.Q6J("ngIf",(null==(a=e.activateForm.get("token"))?null:a.hasError("required"))&&(null==(a=e.activateForm.get("token"))?null:a.touched)),t.xp6(3),t.Q6J("ngIf",!1===e.loading),t.xp6(1),t.Q6J("ngIf",!0===e.loading),t.xp6(4),t.Q6J("routerLink",t.DdM(6,E)),t.xp6(4),t.Q6J("routerLink",t.DdM(7,J))}},dependencies:[m.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,l.rH,v.w,h.c]}),o})()}];let k=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(N),l.Bz]}),o})();var x=c(335);let L=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.ez,r.UX,r.u5,k,x.d]}),o})()}}]);