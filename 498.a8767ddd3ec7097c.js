"use strict";(self.webpackChunkFrontend_ASIA_DEPOT=self.webpackChunkFrontend_ASIA_DEPOT||[]).push([[498],{498:(_t,A,a)=>{a.r(A),a.d(A,{ProductsModule:()=>mt});var m=a(6895),c=a(433),p=a(5808),u=a(1548),t=a(8256),_=a(9616),h=a(3809),b=a(3650),w=a(274),v=a(6428),f=a(2150),P=a(3310);const T=function(r,i){return["/products/category",r,i]};function y(r,i){if(1&r&&(t.TgZ(0,"li",4)(1,"a",15),t._uU(2),t.qZA()()),2&r){const o=i.$implicit;t.xp6(1),t.Q6J("routerLink",t.WLB(2,T,o.id,o.Nombre_Categoria)),t.xp6(1),t.Oqu(o.Nombre_Categoria)}}function q(r,i){1&r&&(t.TgZ(0,"div",16)(1,"div",17)(2,"h5"),t._uU(3," Lo sentimos, no se encontraron productos en esta categor\xeda. \xa1Por favor, elige otra categor\xeda o vuelve m\xe1s tarde! "),t.qZA(),t._UZ(4,"img",18),t.qZA()())}function k(r,i){if(1&r){const o=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,s=t.oxw();return t.KtG(s.addProductCart(n.id))}),t._UZ(1,"i",38),t.qZA()}}function S(r,i){1&r&&(t.TgZ(0,"button",39),t._UZ(1,"i",38),t.qZA())}const Z=function(r){return["/product/detail",r]};function U(r,i){if(1&r&&(t.TgZ(0,"a",40),t._uU(1,"Ver detalles"),t.qZA()),2&r){const o=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,Z,o.id))}}function I(r,i){1&r&&(t.TgZ(0,"button",41),t._uU(1,"Agotado"),t.qZA())}function O(r,i){if(1&r){const o=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22),t._UZ(4,"img",23),t.qZA(),t.TgZ(5,"div",24),t.YNc(6,k,2,0,"button",25),t.YNc(7,S,2,0,"button",26),t.TgZ(8,"button",27),t.NdJ("click",function(){const s=t.CHM(o).$implicit,d=t.oxw();return t.KtG(d.addFavoriteProduct(s.id))}),t._UZ(9,"i",28),t.qZA(),t.TgZ(10,"button",29),t._UZ(11,"i",30),t.qZA()()(),t.TgZ(12,"div",31)(13,"a",32)(14,"h4"),t._uU(15),t.qZA()(),t.TgZ(16,"h5"),t._uU(17),t.qZA(),t.TgZ(18,"div",33)(19,"h5",34),t._uU(20),t.qZA()(),t.TgZ(21,"div",35),t.YNc(22,U,2,3,"a",36),t.YNc(23,I,2,0,"button",37),t.qZA()()()()}if(2&r){const o=i.$implicit,e=t.oxw();t.xp6(4),t.Q6J("src",e.productImages[o.id]||"assets/Logo_ASIA_DEPOT.png",t.LSH),t.xp6(2),t.Q6J("ngIf",o.Cantidad_Stock>0),t.xp6(1),t.Q6J("ngIf",0==o.Cantidad_Stock),t.xp6(3),t.Q6J("routerLink",t.VKq(10,Z,o.id)),t.xp6(3),t.Q6J("routerLink",t.VKq(12,Z,o.id)),t.xp6(2),t.Oqu(o.Nombre_Producto),t.xp6(2),t.hij("Cantidad disponible: ",o.Cantidad_Stock,""),t.xp6(3),t.hij("Q",o.Precio_Venta,""),t.xp6(2),t.Q6J("ngIf",o.Cantidad_Stock>0),t.xp6(1),t.Q6J("ngIf",0==o.Cantidad_Stock)}}function F(r,i){if(1&r){const o=t.EpF();t.TgZ(0,"li",44)(1,"a",49),t.NdJ("click",function(){const s=t.CHM(o).$implicit,d=t.oxw(2);return t.KtG(d.changePage(s))}),t._uU(2),t.qZA()()}if(2&r){const o=i.$implicit,e=t.oxw(2);t.ekj("active",e.currentPage===o),t.xp6(2),t.Oqu(o)}}function N(r,i){if(1&r){const o=t.EpF();t.TgZ(0,"nav",42)(1,"ul",43)(2,"li",44)(3,"a",45),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.changePage(n.currentPage-1))}),t.TgZ(4,"span",46),t._uU(5,"\xab"),t.qZA()()(),t.YNc(6,F,3,3,"li",47),t.TgZ(7,"li",44)(8,"a",48),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.changePage(n.currentPage+1))}),t.TgZ(9,"span",46),t._uU(10,"\xbb"),t.qZA()()()()()}if(2&r){const o=t.oxw();t.xp6(2),t.ekj("disabled",1===o.currentPage),t.xp6(4),t.Q6J("ngForOf",o.getPagesArray()),t.xp6(1),t.ekj("disabled",o.currentPage===o.totalPages)}}const M=function(){return["/products"]};let x=(()=>{class r{constructor(o,e,n,s,d,l,g){this.route=o,this.router=e,this.authService=n,this.productService=s,this.shoppingCartService=d,this.categoryService=l,this.customAlertService=g,this.category=[],this.product=[],this.prducts=[],this.productImages={},this.totalPages=0,this.currentPage=1,this.pageSize=8,this.msgError="",this.validateForm()}ngOnInit(){this.scrollToTop(),this.getCategories(),this.getParamsId()}validateForm(){this.registerForm=new c.cw({nombre:new c.NI("",[c.kI.required,c.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\xfc\xdc\s]+$/)])})}getCategories(){this.categoryService.getCategories(`${u.Q}/usuario/ver/categorias`).subscribe(o=>{this.category=o.categories,this.totalPages=o.totalPages,this.currentPage=o.currentPage})}getParamsId(){this.route.paramMap.subscribe(o=>{const e=o.get("id");if(e){const n=parseInt(e);this.getProductsCategory(n)}else this.getProducts()})}getProducts(){try{this.productService.getProducts(`${u.Q}/usuario/ver/productos?estado=Activo`,this.currentPage,this.pageSize).subscribe({next:o=>{this.product=o.products,this.totalPages=o.totalPages,this.currentPage=o.currentPage,this.msgError="",this.product.forEach(e=>{this.getPhotos(e.id)})},error:o=>{this.customAlertService.sweetAlertPersonalizada("error","Error",o.error.error)}})}catch(o){console.log(o.error)}}getProductsFilter(){try{if(this.registerForm.valid){const o=this.registerForm.get("nombre")?.value;this.productService.getProducts(`${u.Q}/usuario/ver/productos?estado=Activo&nombre=${o}`).subscribe({next:e=>{this.product=e.products,this.msgError="",this.product.forEach(n=>{this.getPhotos(n.id)})},error:e=>{this.msgError=e.error.error,this.product=[],this.totalPages=0}})}else this.getProducts()}catch(o){console.log(o.error)}}getProductsCategory(o){try{this.productService.getProducts(`${u.Q}/usuario/ver/productos/categoria?estado=Activo&categoria=${o}`,this.currentPage,this.pageSize).subscribe({next:e=>{this.product=e.products,this.totalPages=e.totalPages,this.currentPage=e.currentPage,this.msgError="",this.product.forEach(n=>{this.getPhotos(n.id)})},error:e=>{this.msgError=e.error.error,this.product=[],this.totalPages=0}})}catch(e){console.log(e.error)}}getPhotos(o){try{this.productService.getProductPhoto(`${u.Q}/usuario/ver/foto/producto`,o).subscribe({next:e=>{this.productImages[o]=URL.createObjectURL(e)},error:e=>{this.productImages[o]="assets/Logo_ASIA_DEPOT.png",console.log(e.error.error)}})}catch(e){console.log(e.error)}}addFavoriteProduct(o){try{if(!this.authService.isAuthenticated())return this.customAlertService.sweetAlertPersonalizada("error","Sin autenticaci\xf3n","Para agregar un producto a favoritos primero debes de iniciar sesi\xf3n.");this.productService.addFavoriteProduct(`${u.Q}/usuario/agregar/producto/favorito`,o).subscribe({next:e=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",e.msg)},error:e=>{this.customAlertService.sweetAlertPersonalizada("error","Lo siento",e.error.error)}})}catch(e){console.log(e.error)}}changePage(o){o>=1&&o<=this.totalPages&&(this.currentPage=o,this.getProducts(),this.scrollToTop())}getPagesArray(){const o=[];for(let e=1;e<=this.totalPages;e++)o.push(e);return o}addProductCart(o){try{if(!this.authService.isAuthenticated())return this.customAlertService.sweetAlertPersonalizada("error","Sin autenticaci\xf3n","Para agregar un producto al carrito primero debes de iniciar sesi\xf3n.");this.shoppingCartService.addProductCart(`${u.Q}/usuario/carrito/agregar`,{ID_Producto_FK:o,Cantidad_Producto:1}).subscribe({next:n=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getProducts()},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Error",n.error.error)}})}catch(e){console.log(e.error)}}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return r.\u0275fac=function(o){return new(o||r)(t.Y36(p.gz),t.Y36(p.F0),t.Y36(_.e),t.Y36(h.M),t.Y36(b.F),t.Y36(w.H),t.Y36(v.y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-list"]],decls:21,vars:7,consts:[[1,"container-fluid","pt-5","pb-3"],[1,"mx-xl-5","mb-4","text-center"],[1,"row","px-xl-5"],[1,"nav","nav-pills"],[1,"nav-item"],[1,"nav-link","active",3,"routerLink"],["class","nav-item",4,"ngFor","ngForOf"],[1,"col-md-12","mb-5","d-flex","justify-content-center","mt-4"],["role","search",1,"d-flex",3,"formGroup","ngSubmit"],["formControlName","nombre","type","search","placeholder","Bucar producto","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"],["class","row justify-content-center align-items-center",4,"ngIf"],["class","col-lg-3 col-md-4 col-sm-6 pb-1",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],["aria-label","Page navigation example",4,"ngIf"],[1,"nav-link",3,"routerLink"],[1,"row","justify-content-center","align-items-center"],[1,"col-12","text-center"],["width","300","height","300","src","assets/404.jpg","alt","Error 404",1,"img-fluid","rounded-circle"],[1,"col-lg-3","col-md-4","col-sm-6","pb-1"],[1,"product-item","bg-light","shadow-lg","rounded-5","mb-4"],[1,"product-img","position-relative","overflow-hidden"],[1,"col-md4"],["alt","Imagen-Producto",1,"img-fluid","w-100",3,"src"],[1,"product-action"],["class","btn btn-outline-dark btn-square",3,"click",4,"ngIf"],["class","btn btn-outline-dark btn-square","disabled","",4,"ngIf"],[1,"btn","btn-outline-dark","btn-square",3,"click"],[1,"fa","fa-heart"],[1,"btn","btn-outline-dark","btn-square",3,"routerLink"],[1,"fa","fa-search"],[1,"text-center","py-4"],[1,"text-decoration-none","text-truncate","productName",3,"routerLink"],[1,"d-flex","align-items-center","justify-content-center","mt-2"],[2,"margin-right","6px"],[1,"container-btn"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],["class","btn btn-danger","disabled","",4,"ngIf"],[1,"fa","fa-shopping-cart"],["disabled","",1,"btn","btn-outline-dark","btn-square"],[1,"btn","btn-primary",3,"routerLink"],["disabled","",1,"btn","btn-danger"],["aria-label","Page navigation example"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"btn","page-link",3,"click"],["aria-hidden","true"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"btn","page-link",3,"click"],[1,"btn","page-link",3,"click"]],template:function(o,e){1&o&&(t._UZ(0,"app-nav-bar"),t.TgZ(1,"div",0)(2,"h1",1),t._uU(3,"Cat\xe1logo de Productos ASIA DEPOT"),t.qZA(),t.TgZ(4,"div",2)(5,"ul",3)(6,"li",4)(7,"a",5),t._uU(8,"Todos"),t.qZA()(),t.YNc(9,y,3,5,"li",6),t.qZA()(),t.TgZ(10,"div",7)(11,"form",8),t.NdJ("ngSubmit",function(){return e.getProductsFilter()}),t._UZ(12,"input",9),t.TgZ(13,"button",10),t._uU(14,"Buscar"),t.qZA()()(),t.TgZ(15,"div",2),t.YNc(16,q,5,0,"div",11),t.YNc(17,O,24,14,"div",12),t.qZA(),t.TgZ(18,"div",13),t.YNc(19,N,11,5,"nav",14),t.qZA()(),t._UZ(20,"app-footer")),2&o&&(t.xp6(7),t.Q6J("routerLink",t.DdM(6,M)),t.xp6(2),t.Q6J("ngForOf",e.category),t.xp6(2),t.Q6J("formGroup",e.registerForm),t.xp6(5),t.Q6J("ngIf",e.msgError),t.xp6(1),t.Q6J("ngForOf",e.product),t.xp6(2),t.Q6J("ngIf",e.totalPages>1))},dependencies:[m.sg,m.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,p.rH,f.w,P.c],styles:[".nav-item[_ngcontent-%COMP%]{cursor:pointer}.product-item[_ngcontent-%COMP%]{transition:.5s}.product-action[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;align-items:center;justify-content:center;transition:.5s}.product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{position:relative;margin:100px 3px 0;opacity:0}.product-item[_ngcontent-%COMP%]:hover{box-shadow:0 0 30px #ddd}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]{background:rgba(255,255,255,.7)}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:first-child{opacity:1;margin-top:0;transition:.3s 0s}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:nth-child(2){opacity:1;margin-top:0;transition:.3s .05s}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:nth-child(3){opacity:1;margin-top:0;transition:.3s .1s}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:nth-child(4){opacity:1;margin-top:0;transition:.3s .15s}.product-item[_ngcontent-%COMP%]   .product-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:.5s;width:250px;height:280px}.product-item[_ngcontent-%COMP%]:hover   .product-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.2)}.productName[_ngcontent-%COMP%]{color:#000}.container-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{font-weight:700}.text-primary[_ngcontent-%COMP%]{color:#ffd333!important}@media (max-width: 768px){.product-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px}}"]}),r})();var C=a(8104);function Q(r,i){if(1&r){const o=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.decreaseQuantity())}),t._UZ(1,"i",39),t.qZA()}}function R(r,i){1&r&&(t.TgZ(0,"button",40),t._UZ(1,"i",39),t.qZA())}function J(r,i){if(1&r&&t._UZ(0,"input",41),2&r){const o=t.oxw();t.s9C("value",o.increment)}}function E(r,i){1&r&&t._UZ(0,"input",42)}function L(r,i){if(1&r){const o=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.increaseQuantity())}),t._UZ(1,"i",44),t.qZA()}}function Y(r,i){1&r&&(t.TgZ(0,"button",45),t._UZ(1,"i",44),t.qZA())}function D(r,i){if(1&r){const o=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onSubmit(n.product.id))}),t._UZ(1,"i",47),t._uU(2," Agregar al carrito "),t.qZA()}}function j(r,i){1&r&&(t.TgZ(0,"button",48),t._UZ(1,"i",47),t._uU(2," Agregar al carrito "),t.qZA())}const z=function(r){return["/product/review",r]};let $=(()=>{class r{constructor(o,e,n,s,d,l){this.route=o,this.productService=e,this.authService=n,this.reviewsService=s,this.shoppingCartService=d,this.customAlertService=l,this.product={},this.category={},this.increment=1,this.productReviews=[],this.countReviews=0}ngOnInit(){this.scrollToTop(),this.getParamsId()}getParamsId(){this.route.paramMap.subscribe(o=>{const e=o.get("id");e&&(this.getProductId(e),this.getReviews(e))})}getProductId(o){this.productService.getProductId(`${u.Q}/usuario/ver/producto/${o}`).subscribe(e=>{this.product=e.product,this.category=e.product.categoria})}onSubmit(o){try{if(!this.authService.isAuthenticated())return this.customAlertService.sweetAlertPersonalizada("error","Sin autenticaci\xf3n","Para agregar un producto al carrito primero debes de iniciar sesi\xf3n.");this.shoppingCartService.addProductCart(`${u.Q}/usuario/carrito/agregar`,{ID_Producto_FK:o,Cantidad_Producto:this.increment}).subscribe({next:n=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getParamsId(),this.increment=1},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Lo siento",`No hay sufiente stock de "${this.product.Nombre_Producto}"`)}})}catch(e){console.log(e.error)}}getReviews(o){try{this.reviewsService.getReviews(`${u.Q}/usuario/ver/todas/valoraciones/producto`,o).subscribe({next:e=>{this.productReviews=e.productReviews,this.countReviews=this.productReviews.length},error:e=>{console.log(e.error.error)}})}catch(e){console.log(e.error)}}decreaseQuantity(){this.increment>1&&this.increment--}increaseQuantity(){this.increment<this.product.Cantidad_Stock?this.increment++:this.customAlertService.sweetAlertPersonalizada("error","Lo siento",`No hay sufiente stock de "${this.product.Nombre_Producto}"`)}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return r.\u0275fac=function(o){return new(o||r)(t.Y36(p.gz),t.Y36(h.M),t.Y36(_.e),t.Y36(C.Y),t.Y36(b.F),t.Y36(v.y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-detail"]],decls:57,vars:19,consts:[[1,"container-fluid","pb-5","mt-4"],[1,"row","px-xl-5"],[1,"col-lg-5"],["src","assets/Logo_ASIA_DEPOT.png","alt","Logo producto ASIA DEPOT",1,"w-100","h-100"],[1,"col-lg-7","h-auto"],[1,"h-100","bg-light","p-5"],[1,"text-center","mb-4"],[1,"mb-4"],[1,"font-weight-semi-bold","mb-2"],[1,"font-weight-semi-bold","mb-4"],[1,"d-flex","justify-content-center","align-items-center","mt-5","mb-5"],[1,"input-group","quantity"],[1,"input-group-btn"],["class","btn btn-primary btn-minus",3,"click",4,"ngIf"],["class","btn btn-primary btn-minus","disabled","",4,"ngIf"],["type","text","class","form-control border-2 text-center quantity-value",3,"value",4,"ngIf"],["type","text","class","form-control border-2 text-center quantity-value","value","0","disabled","",4,"ngIf"],["class","btn btn-primary btn-plus",3,"click",4,"ngIf"],["class","btn btn-primary btn-plus","disabled","",4,"ngIf"],["class","btn btn-primary px-4 btn-add-to-cart",3,"click",4,"ngIf"],["class","btn btn-danger px-4 btn-add-to-cart","disabled","",4,"ngIf"],[1,"d-flex","pt-5"],[1,"text-dark","mr-2"],[1,"d-inline-flex"],["href","https://www.facebook.com/asiadepot?mibextid=ZbWKwL","target","_blank",1,"text-dark","px-2"],[1,"fab","fa-facebook-f"],["href","https://instagram.com/asiadepot?igshid=MzRlODBiNWFlZA==","target","_blank",1,"text-dark","px-2"],[1,"fab","fa-instagram"],["href","https://wa.me/50246651581","target","_blank",1,"text-dark","px-2"],[1,"fab","fa-whatsapp"],[1,"col"],[1,"bg-light"],[1,"nav","nav-tabs","mb-2"],["data-toggle","tab",1,"nav-item","nav-link","text-dark","active"],["data-toggle","tab",1,"nav-item","nav-link","text-dark",3,"routerLink"],[1,"tab-content"],["id","tab-pane-1",1,"tab-pane","fade","show","active","p-5"],[1,"mb-3"],[1,"btn","btn-primary","btn-minus",3,"click"],[1,"fa","fa-minus"],["disabled","",1,"btn","btn-primary","btn-minus"],["type","text",1,"form-control","border-2","text-center","quantity-value",3,"value"],["type","text","value","0","disabled","",1,"form-control","border-2","text-center","quantity-value"],[1,"btn","btn-primary","btn-plus",3,"click"],[1,"fa","fa-plus"],["disabled","",1,"btn","btn-primary","btn-plus"],[1,"btn","btn-primary","px-4","btn-add-to-cart",3,"click"],[1,"fa","fa-shopping-cart","mr-1"],["disabled","",1,"btn","btn-danger","px-4","btn-add-to-cart"]],template:function(o,e){1&o&&(t._UZ(0,"app-nav-bar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div"),t._UZ(5,"img",3),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"h1",6),t._uU(9),t.qZA(),t.TgZ(10,"p",7),t._uU(11),t.qZA(),t.TgZ(12,"h3",8),t._uU(13),t.qZA(),t.TgZ(14,"p",7),t._uU(15),t.qZA(),t.TgZ(16,"h3",9),t._uU(17),t.qZA(),t.TgZ(18,"h3",9),t._uU(19),t.qZA(),t.TgZ(20,"div",10)(21,"div",11)(22,"div",12),t.YNc(23,Q,2,0,"button",13),t.YNc(24,R,2,0,"button",14),t.qZA(),t.YNc(25,J,1,1,"input",15),t.YNc(26,E,1,0,"input",16),t.TgZ(27,"div",12),t.YNc(28,L,2,0,"button",17),t.YNc(29,Y,2,0,"button",18),t.qZA()(),t.YNc(30,D,3,0,"button",19),t.YNc(31,j,3,0,"button",20),t.qZA(),t.TgZ(32,"div",21)(33,"strong",22),t._uU(34,"S\xedguenos en:"),t.qZA(),t.TgZ(35,"div",23)(36,"a",24),t._UZ(37,"i",25),t.qZA(),t.TgZ(38,"a",26),t._UZ(39,"i",27),t.qZA(),t.TgZ(40,"a",28),t._UZ(41,"i",29),t.qZA()()()()()(),t.TgZ(42,"div",1)(43,"div",30)(44,"div",31)(45,"div",32)(46,"a",33),t._uU(47,"Description"),t.qZA(),t.TgZ(48,"a",34),t._uU(49),t.qZA()(),t.TgZ(50,"div",35)(51,"div",36)(52,"h4",37),t._uU(53,"Descripci\xf3n del producto"),t.qZA(),t.TgZ(54,"p"),t._uU(55),t.qZA()()()()()()(),t._UZ(56,"app-footer")),2&o&&(t.xp6(9),t.Oqu(e.product.Nombre_Producto),t.xp6(2),t.Oqu(e.product.Descripcion_Producto),t.xp6(2),t.Oqu(e.category.Nombre_Categoria),t.xp6(2),t.Oqu(e.category.Descripcion_Categoria),t.xp6(2),t.hij("Q.",e.product.Precio_Venta,""),t.xp6(2),t.hij("Disponibilidad: ",e.product.Cantidad_Stock,""),t.xp6(4),t.Q6J("ngIf",e.product.Cantidad_Stock>0),t.xp6(1),t.Q6J("ngIf",0===e.product.Cantidad_Stock),t.xp6(1),t.Q6J("ngIf",e.product.Cantidad_Stock>0),t.xp6(1),t.Q6J("ngIf",0===e.product.Cantidad_Stock),t.xp6(2),t.Q6J("ngIf",e.product.Cantidad_Stock>0),t.xp6(1),t.Q6J("ngIf",0===e.product.Cantidad_Stock),t.xp6(1),t.Q6J("ngIf",e.product.Cantidad_Stock>0),t.xp6(1),t.Q6J("ngIf",0===e.product.Cantidad_Stock),t.xp6(17),t.Q6J("routerLink",t.VKq(17,z,e.product.id)),t.xp6(1),t.hij("Reviews (",e.countReviews,")"),t.xp6(6),t.Oqu(e.product.Descripcion_Producto))},dependencies:[m.O5,p.rH,f.w,P.c],styles:[".quantity[_ngcontent-%COMP%]{width:130px;display:flex;align-items:center;justify-content:space-between}.btn-add-to-cart[_ngcontent-%COMP%]{margin-left:10px}.input-group-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem}@media (max-width: 767px){.quantity[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.input-group-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.8rem}.btn-add-to-cart[_ngcontent-%COMP%]{margin-left:10px;width:100%}}"]}),r})();var K=a(6785);function H(r,i){if(1&r){const o=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.decreaseQuantity())}),t._UZ(1,"i",59),t.qZA()}}function G(r,i){1&r&&(t.TgZ(0,"button",60),t._UZ(1,"i",59),t.qZA())}function B(r,i){if(1&r&&t._UZ(0,"input",61),2&r){const o=t.oxw();t.s9C("value",o.increment)}}function V(r,i){1&r&&t._UZ(0,"input",62)}function W(r,i){if(1&r){const o=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.increaseQuantity())}),t._UZ(1,"i",64),t.qZA()}}function X(r,i){1&r&&(t.TgZ(0,"button",65),t._UZ(1,"i",64),t.qZA())}function tt(r,i){if(1&r){const o=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onSubmit(n.product.id))}),t._UZ(1,"i",67),t._uU(2," Agregar al carrito "),t.qZA()}}function et(r,i){1&r&&(t.TgZ(0,"button",68),t._UZ(1,"i",67),t._uU(2," Agregar al carrito "),t.qZA())}function ot(r,i){1&r&&(t.TgZ(0,"div",69)(1,"div",70)(2,"h5"),t._uU(3," \xa1Ups! Parece que a\xfan no hay rese\xf1as para este producto. \xa1Vuelve pronto para ver las opiniones de otros clientes! "),t.qZA(),t._UZ(4,"img",71),t.qZA()())}function rt(r,i){if(1&r&&(t.TgZ(0,"div",74)(1,"div",75)(2,"div",76),t._UZ(3,"img",77),t.qZA(),t.TgZ(4,"div",78)(5,"div",79)(6,"div",80)(7,"p",81)(8,"strong"),t._uU(9,"Fecha de publicaci\xf3n: "),t.qZA(),t._uU(10),t.qZA()(),t.TgZ(11,"div",80)(12,"p")(13,"strong"),t._uU(14),t.qZA(),t._uU(15),t.qZA()(),t.TgZ(16,"div",82)(17,"p"),t._uU(18),t.qZA()()()()()()),2&r){const o=i.$implicit,e=i.index,n=t.oxw(2);t.xp6(3),t.s9C("src",n.images[e],t.LSH),t.xp6(7),t.hij(" ",o.createdAt," "),t.xp6(4),t.AsE(" ",o.cliente.Nombre_Cliente," ",o.cliente.Apellido_Cliente," "),t.xp6(1),t.hij(" - ",o.Puntuacion_Producto," "),t.xp6(3),t.Oqu(o.Comentario_Producto)}}function nt(r,i){if(1&r&&(t.TgZ(0,"div",72),t.YNc(1,rt,19,6,"div",73),t.qZA()),2&r){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.productReviews)}}function it(r,i){1&r&&(t.TgZ(0,"div",83),t._uU(1," La puntuaci\xf3n es obligatoria. "),t.qZA())}function ct(r,i){1&r&&(t.TgZ(0,"div",83),t._uU(1," El comentario es obligatorio. "),t.qZA())}function at(r,i){1&r&&(t.TgZ(0,"div",83),t._uU(1," El comentario no es v\xe1lido, no use car\xe1cteres especiales. "),t.qZA())}function st(r,i){1&r&&(t.TgZ(0,"div",83),t._uU(1," El comentario es demasiado corto (m\xednimo 10 car\xe1cteres). "),t.qZA())}function ut(r,i){1&r&&(t.TgZ(0,"div",83),t._uU(1," El comentario es demasiado largo (m\xe1ximo 200 car\xe1cteres). "),t.qZA())}const dt=function(r){return["/product/detail",r]},lt=[{path:"",redirectTo:"products",pathMatch:"full"},{path:"products",component:x},{path:"products/category/:id/:name",component:x},{path:"products/category/:name",component:x},{path:"product/detail/:id",component:$},{path:"product/review/:id",component:(()=>{class r{constructor(o,e,n,s,d,l,g){this.route=o,this.productService=e,this.authService=n,this.shoppingCartService=s,this.reviewsService=d,this.userService=l,this.customAlertService=g,this.product={},this.category={},this.productReviews=[],this.increment=1,this.noneReviews=!1,this.image="assets/transparent.png",this.images=[],this.countReviews=0,this.validateForm()}ngOnInit(){this.getParamsId()}getParamsId(){this.route.paramMap.subscribe(o=>{const e=o.get("id");e&&(this.getProductId(e),this.getReviews(e))})}getProductId(o){this.productService.getProductId(`${u.Q}/usuario/ver/producto/${o}`).subscribe(e=>{this.product=e.product,this.category=e.product.categoria})}onSubmit(o){try{if(!this.authService.isAuthenticated())return this.customAlertService.sweetAlertPersonalizada("error","Sin autenticaci\xf3n","Para agregar un producto al carrito primero debes de iniciar sesi\xf3n.");this.shoppingCartService.addProductCart(`${u.Q}/usuario/carrito/agregar`,{ID_Producto_FK:o,Cantidad_Producto:this.increment}).subscribe({next:n=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getParamsId(),this.increment=1},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Lo siento",`No hay sufiente stock de "${this.product.Nombre_Producto}"`)}})}catch(e){console.log(e.error)}}validateForm(){this.registerForm=new c.cw({puntuacion:new c.NI("",[c.kI.required,c.kI.pattern("^[0-5]")]),comentario:new c.NI("",[c.kI.required,c.kI.pattern(/^[^[\]<>(){}_=\\|';]+$/),c.kI.minLength(10),c.kI.maxLength(200)])})}addProductReview(o){try{if(!this.authService.isAuthenticated())return this.customAlertService.sweetAlertPersonalizada("error","Sin autenticaci\xf3n","Para agregar una rese\xf1a primero debes de iniciar sesi\xf3n.");if(this.registerForm.valid){const e={Comentario_Producto:this.registerForm.get("comentario")?.value,Puntuacion_Producto:this.registerForm.get("puntuacion")?.value,ID_Producto_FK:o};this.reviewsService.addReview(`${u.Q}/usuario/nueva/valoracion/producto`,e).subscribe({next:n=>{this.registerForm.reset(),this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getReviews(o)},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Error",n.error.error)}})}else this.customAlertService.sweetAlertPersonalizada("error","Error","Por favor, verifica los campos del formulario.")}catch(e){console.log(e.error)}}getReviews(o){try{this.reviewsService.getReviews(`${u.Q}/usuario/ver/todas/valoraciones/producto`,o).subscribe({next:e=>{this.productReviews=e.productReviews,this.countReviews=this.productReviews.length,this.productReviews.forEach(n=>{if(n.createdAt){const l=n.createdAt.split("T")[0];n.createdAt=l}1===n.Puntuacion_Producto&&(n.Puntuacion_Producto=`${n.Puntuacion_Producto} estrella`),n.Puntuacion_Producto=`${n.Puntuacion_Producto} estrellas`,this.getPhotos(n.cliente.id)}),this.noneReviews=!0},error:e=>{this.noneReviews=!1}})}catch(e){console.log(e.error)}}getPhotos(o){try{this.userService.getPhotos(`${u.Q}/usuario/ver/avatar`,o).subscribe({next:e=>{this.images.push(URL.createObjectURL(e))},error:e=>{this.images.push("assets/perfil_picture.png")}})}catch(e){console.log(e.error)}}decreaseQuantity(){this.increment>1&&this.increment--}increaseQuantity(){this.increment<this.product.Cantidad_Stock?this.increment++:this.customAlertService.sweetAlertPersonalizada("error","Lo siento",`No hay sufiente stock de "${this.product.Nombre_Producto}"`)}}return r.\u0275fac=function(o){return new(o||r)(t.Y36(p.gz),t.Y36(h.M),t.Y36(_.e),t.Y36(b.F),t.Y36(C.Y),t.Y36(K.v),t.Y36(v.y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-reviews"]],decls:92,vars:27,consts:[[1,"container-fluid","pb-5","mt-4"],[1,"row","px-xl-5"],[1,"col-lg-5"],["src","assets/Logo_ASIA_DEPOT.png","alt","Logo producto ASIA DEPOT",1,"w-100","h-100"],[1,"col-lg-7","h-auto"],[1,"h-100","bg-light","p-5"],[1,"text-center","mb-4"],[1,"mb-4"],[1,"font-weight-semi-bold","mb-2"],[1,"font-weight-semi-bold","mb-4"],[1,"d-flex","justify-content-center","align-items-center","mt-5","mb-5"],[1,"input-group","quantity"],[1,"input-group-btn"],["class","btn btn-primary btn-minus",3,"click",4,"ngIf"],["class","btn btn-primary btn-minus","disabled","",4,"ngIf"],["type","text","class","form-control border-2 text-center quantity-value",3,"value",4,"ngIf"],["type","text","class","form-control border-2 text-center quantity-value","value","0","disabled","",4,"ngIf"],["class","btn btn-primary btn-plus",3,"click",4,"ngIf"],["class","btn btn-primary btn-plus","disabled","",4,"ngIf"],["class","btn btn-primary px-4 btn-add-to-cart",3,"click",4,"ngIf"],["class","btn btn-danger px-4 btn-add-to-cart","disabled","",4,"ngIf"],[1,"d-flex","pt-2"],[1,"text-dark","mr-2"],[1,"d-inline-flex"],["href","https://www.facebook.com/asiadepot?mibextid=ZbWKwL","target","_blank",1,"text-dark","px-2"],[1,"fab","fa-facebook-f"],["href","https://instagram.com/asiadepot?igshid=MzRlODBiNWFlZA==","target","_blank",1,"text-dark","px-2"],[1,"fab","fa-instagram"],["href","https://wa.me/50246651581","target","_blank",1,"text-dark","px-2"],[1,"fab","fa-whatsapp"],[1,"bg-light","d-flex","row","justify-content-between"],[1,"nav","nav-tabs","mb-2"],["data-toggle","tab",1,"nav-item","nav-link","text-dark",3,"routerLink"],["data-toggle","tab",1,"nav-item","nav-link","text-dark","active"],[1,"tab-content"],["id","tab-pane-3",1,"tab-pane","fade","show","active"],[1,"row","p-4"],[1,"col-md-6"],["class","row justify-content-center align-items-center",4,"ngIf"],["data-spy","scroll","data-target","#reviewsNav","data-offset","50","style","height: 400px; overflow-y: auto; overflow-x: hidden;",4,"ngIf"],[1,"col-md-5"],[1,"row","d-flex","justify-content-center"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["aria-label","Default select example","formControlName","puntuacion",1,"form-select"],["selected",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["for","register"],["class","text-danger",4,"ngIf"],["id","floatingTextarea2","minlength","10","maxlength","201","formControlName","comentario","placeholder","Ingresa tu direcci\xf3n general",1,"form-control",2,"max-height","100px","height","100px","max-width","542px"],["for","registerAddress"],[1,"form-group","mb-0"],["type","submit","value","Agregar rese\xf1a",1,"btn","btn-primary","px-3"],[1,"btn","btn-primary","btn-minus",3,"click"],[1,"fa","fa-minus"],["disabled","",1,"btn","btn-primary","btn-minus"],["type","text",1,"form-control","border-2","text-center","quantity-value",3,"value"],["type","text","value","0","disabled","",1,"form-control","border-2","text-center","quantity-value"],[1,"btn","btn-primary","btn-plus",3,"click"],[1,"fa","fa-plus"],["disabled","",1,"btn","btn-primary","btn-plus"],[1,"btn","btn-primary","px-4","btn-add-to-cart",3,"click"],[1,"fa","fa-shopping-cart","mr-1"],["disabled","",1,"btn","btn-danger","px-4","btn-add-to-cart"],[1,"row","justify-content-center","align-items-center"],[1,"col-12","text-center"],["width","300","height","300","src","assets/404.jpg","alt","Error 404",1,"img-fluid","rounded-circle","mt-3"],["data-spy","scroll","data-target","#reviewsNav","data-offset","50",2,"height","400px","overflow-y","auto","overflow-x","hidden"],["id","review1","class","review shadow-lg mb-2",4,"ngFor","ngForOf"],["id","review1",1,"review","shadow-lg","mb-2"],[1,"row","align-items-center"],[1,"col-md-2","mt-2","d-flex","justify-content-center"],["alt","Foto del Cliente",1,"img-fluid","rounded-circle",3,"src"],[1,"col-md-9"],[1,"row"],[1,"col-12"],[1,"text-end"],[1,"col-12",2,"text-align","justify"],[1,"text-danger"]],template:function(o,e){if(1&o&&(t._UZ(0,"app-nav-bar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div"),t._UZ(5,"img",3),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"h1",6),t._uU(9),t.qZA(),t.TgZ(10,"p",7),t._uU(11),t.qZA(),t.TgZ(12,"h3",8),t._uU(13),t.qZA(),t.TgZ(14,"p",7),t._uU(15),t.qZA(),t.TgZ(16,"h3",9),t._uU(17),t.qZA(),t.TgZ(18,"h3",9),t._uU(19),t.qZA(),t.TgZ(20,"div",10)(21,"div",11)(22,"div",12),t.YNc(23,H,2,0,"button",13),t.YNc(24,G,2,0,"button",14),t.qZA(),t.YNc(25,B,1,1,"input",15),t.YNc(26,V,1,0,"input",16),t.TgZ(27,"div",12),t.YNc(28,W,2,0,"button",17),t.YNc(29,X,2,0,"button",18),t.qZA()(),t.YNc(30,tt,3,0,"button",19),t.YNc(31,et,3,0,"button",20),t.qZA(),t.TgZ(32,"div",21)(33,"strong",22),t._uU(34,"S\xedguenos en:"),t.qZA(),t.TgZ(35,"div",23)(36,"a",24),t._UZ(37,"i",25),t.qZA(),t.TgZ(38,"a",26),t._UZ(39,"i",27),t.qZA(),t.TgZ(40,"a",28),t._UZ(41,"i",29),t.qZA()()()()()(),t.TgZ(42,"div",1)(43,"div",30)(44,"div",31)(45,"a",32),t._uU(46,"Description"),t.qZA(),t.TgZ(47,"a",33),t._uU(48),t.qZA()(),t.TgZ(49,"div",34)(50,"div",35)(51,"div",36)(52,"div",37)(53,"h4",7),t._uU(54),t.qZA(),t.YNc(55,ot,5,0,"div",38),t.YNc(56,nt,2,1,"div",39),t.qZA(),t.TgZ(57,"div",40)(58,"div",41)(59,"h4",7),t._uU(60,"Deja tu rese\xf1a"),t.qZA(),t.TgZ(61,"form",42),t.NdJ("ngSubmit",function(){return e.addProductReview(e.product.id)}),t.TgZ(62,"div",43)(63,"select",44)(64,"option",45),t._uU(65,"Selecciona una puntuaci\xf3n"),t.qZA(),t.TgZ(66,"option",46),t._uU(67,"0 estrella"),t.qZA(),t.TgZ(68,"option",47),t._uU(69,"1 estrella"),t.qZA(),t.TgZ(70,"option",48),t._uU(71,"2 estrellas"),t.qZA(),t.TgZ(72,"option",49),t._uU(73,"3 estrellas"),t.qZA(),t.TgZ(74,"option",50),t._uU(75,"4 estrellas"),t.qZA(),t.TgZ(76,"option",51),t._uU(77,"5 estrellas"),t.qZA()(),t.TgZ(78,"label",52),t._uU(79,"Puntuaci\xf3n de producto"),t.qZA(),t.YNc(80,it,2,0,"div",53),t.qZA(),t.TgZ(81,"div",43),t._UZ(82,"textarea",54),t.TgZ(83,"label",55),t._uU(84,"Comentario"),t.qZA(),t.YNc(85,ct,2,0,"div",53),t.YNc(86,at,2,0,"div",53),t.YNc(87,st,2,0,"div",53),t.YNc(88,ut,2,0,"div",53),t.qZA(),t.TgZ(89,"div",56),t._UZ(90,"input",57),t.qZA()()()()()()()()()(),t._UZ(91,"app-footer")),2&o){let n,s,d,l,g;t.xp6(9),t.Oqu(e.product.Nombre_Producto),t.xp6(2),t.Oqu(e.product.Descripcion_Producto),t.xp6(2),t.Oqu(e.category.Nombre_Categoria),t.xp6(2),t.Oqu(e.category.Descripcion_Categoria),t.xp6(2),t.hij("Q.",e.product.Precio_Venta,""),t.xp6(2),t.hij("Disponibilidad: ",e.product.Cantidad_Stock,""),t.xp6(4),t.Q6J("ngIf",e.product.Cantidad_Stock>0),t.xp6(1),t.Q6J("ngIf",0===e.product.Cantidad_Stock),t.xp6(1),t.Q6J("ngIf",e.product.Cantidad_Stock>0),t.xp6(1),t.Q6J("ngIf",0===e.product.Cantidad_Stock),t.xp6(2),t.Q6J("ngIf",e.product.Cantidad_Stock>0),t.xp6(1),t.Q6J("ngIf",0===e.product.Cantidad_Stock),t.xp6(1),t.Q6J("ngIf",e.product.Cantidad_Stock>0),t.xp6(1),t.Q6J("ngIf",0===e.product.Cantidad_Stock),t.xp6(14),t.Q6J("routerLink",t.VKq(25,dt,e.product.id)),t.xp6(3),t.hij("Reviews (",e.countReviews,")"),t.xp6(6),t.hij('Rese\xf1as de "',e.product.Nombre_Producto,'"'),t.xp6(1),t.Q6J("ngIf",0==e.noneReviews),t.xp6(1),t.Q6J("ngIf",1==e.noneReviews),t.xp6(5),t.Q6J("formGroup",e.registerForm),t.xp6(19),t.Q6J("ngIf",(null==(n=e.registerForm.get("puntuacion"))?null:n.hasError("required"))&&(null==(n=e.registerForm.get("puntuacion"))?null:n.touched)),t.xp6(5),t.Q6J("ngIf",(null==(s=e.registerForm.get("comentario"))?null:s.hasError("required"))&&(null==(s=e.registerForm.get("comentario"))?null:s.touched)),t.xp6(1),t.Q6J("ngIf",(null==(d=e.registerForm.get("comentario"))?null:d.hasError("pattern"))&&(null==(d=e.registerForm.get("comentario"))?null:d.touched)),t.xp6(1),t.Q6J("ngIf",(null==(l=e.registerForm.get("comentario"))?null:l.hasError("minlength"))&&(null==(l=e.registerForm.get("comentario"))?null:l.touched)),t.xp6(1),t.Q6J("ngIf",(null==(g=e.registerForm.get("comentario"))?null:g.hasError("maxlength"))&&(null==(g=e.registerForm.get("comentario"))?null:g.touched))}},dependencies:[m.sg,m.O5,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.wO,c.nD,c.sg,c.u,p.rH,f.w,P.c],styles:[".quantity[_ngcontent-%COMP%]{width:130px;display:flex;align-items:center;justify-content:space-between}.btn-add-to-cart[_ngcontent-%COMP%]{margin-left:10px}.input-group-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem}@media (max-width: 767px){.quantity[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.input-group-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.8rem}.btn-add-to-cart[_ngcontent-%COMP%]{margin-left:10px;width:100%}}"]}),r})()}];let pt=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.Bz.forChild(lt),p.Bz]}),r})();var gt=a(335);let mt=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[m.ez,c.UX,c.u5,pt,gt.d]}),r})()}}]);