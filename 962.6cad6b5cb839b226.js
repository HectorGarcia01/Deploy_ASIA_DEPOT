"use strict";(self.webpackChunkFrontend_ASIA_DEPOT=self.webpackChunkFrontend_ASIA_DEPOT||[]).push([[962],{1962:(U,l,c)=>{c.r(l),c.d(l,{CustomerManagementModule:()=>S});var u=c(6895),d=c(5808),t=c(8256),m=c(4554),p=c(7482);let _=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-customer"]],decls:7,vars:0,consts:[["id","main-content"],[1,"d-flex","justify-content-center"],[1,"col-md-9","mt-4"],[1,"container"],[1,"row","d-flex","justify-content-center"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav-bar"),t.TgZ(2,"section",1)(3,"div",2)(4,"div",3),t._UZ(5,"div",4),t.qZA(),t._UZ(6,"app-footer"),t.qZA()()())},dependencies:[m.w,p.c]}),o})();var g=c(1548),h=c(2327),C=c(9616),a=c(529);let M=(()=>{class o{constructor(e,n){this.http=e,this.authService=n}getCustomers(e){const n=this.authService.getCookieAuth(),s=new a.WM({Authorization:`Bearer ${n}`});return this.http.get(e,{headers:s})}getPhotos(e,n){const s=this.authService.getCookieAuth(),i=new a.WM({Authorization:`Bearer ${s}`});return this.http.get(e=`${e}/${n}`,{headers:i,responseType:"blob"})}getCustomerId(e,n){const s=this.authService.getCookieAuth(),i=new a.WM({Authorization:`Bearer ${s}`});return this.http.get(e=`${e}/${n}`,{headers:i})}deleteCustomer(e,n){const s=this.authService.getCookieAuth(),i=new a.WM({Authorization:`Bearer ${s}`});return this.http.delete(e=`${e}/${n}`,{headers:i})}activateCustomer(e,n){const s=this.authService.getCookieAuth(),i=new a.WM({Authorization:`Bearer ${s}`});return this.http.patch(e=`${e}/${n}`,null,{headers:i})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(a.eN),t.LFG(C.e))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var O=c(6428);function f(o,r){if(1&o&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function P(o,r){if(1&o&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function v(o,r){if(1&o&&(t.TgZ(0,"span",22),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function b(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,i=t.oxw();return t.KtG(i.activateCustomer(s.id))}),t._UZ(1,"i",24),t.qZA()}}function x(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,i=t.oxw();return t.KtG(i.deleteCustomer(s.id))}),t._UZ(1,"i",26),t.qZA()}}const A=function(o,r){return["/admin/view/customer",o,r]};function Z(o,r){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",12),t.TgZ(3,"p"),t._uU(4),t.qZA()(),t.TgZ(5,"td",10)(6,"p"),t._uU(7),t.qZA()(),t.TgZ(8,"td",10)(9,"p"),t._uU(10),t.qZA()(),t.TgZ(11,"td",10)(12,"p"),t._uU(13),t.qZA()(),t.TgZ(14,"td",10),t.YNc(15,f,2,1,"span",13),t.YNc(16,P,2,1,"span",14),t.YNc(17,v,2,1,"span",15),t.qZA(),t.TgZ(18,"td",10)(19,"button",16),t._UZ(20,"i",17),t.qZA(),t.YNc(21,b,2,0,"button",18),t.YNc(22,x,2,0,"button",19),t.qZA()()),2&o){const e=r.$implicit,n=t.oxw();t.xp6(2),t.Q6J("src",n.customerImages[e.id]||"assets/perfil_picture.png",t.LSH),t.xp6(2),t.AsE("",e.Nombre_Cliente," ",e.Apellido_Cliente,""),t.xp6(3),t.Oqu(e.Telefono_Cliente),t.xp6(3),t.Oqu(e.Correo_Cliente),t.xp6(3),t.Oqu(e.createdAt),t.xp6(2),t.Q6J("ngIf","Activo"===e.estado.Tipo_Estado),t.xp6(1),t.Q6J("ngIf","Pendiente"===e.estado.Tipo_Estado),t.xp6(1),t.Q6J("ngIf","Inactivo"===e.estado.Tipo_Estado),t.xp6(2),t.Q6J("routerLink",t.WLB(12,A,e.id,n.getCustomerName(e))),t.xp6(2),t.Q6J("ngIf","Inactivo"===e.estado.Tipo_Estado&&!0===n.permissions),t.xp6(1),t.Q6J("ngIf","Inactivo"!==e.estado.Tipo_Estado&&!0===n.permissions)}}const T=[{path:"",redirectTo:"list/customers",pathMatch:"full"},{path:"list/customers",component:(()=>{class o{constructor(e,n,s,i){this.toggleNavBarService=e,this.authService=n,this.customerService=s,this.customAlertService=i,this.sidebarVisible=!1,this.customers=[],this.image="assets/transparent.png",this.customerImages={},this.permissions=!1,this.pathRole="",this.toggleNavbarStatus()}isSuperAdmin(){return"SuperAdmin"===this.authService.getCookieRole()?(this.pathRole="superAdmin",this.permissions=!0,!0):(this.pathRole="admin",this.permissions=!1,!1)}ngOnInit(){this.isSuperAdmin(),this.getCustomers()}ngOnDestroy(){this.subscription.unsubscribe()}toggleNavbarStatus(){this.subscription=this.toggleNavBarService.sidebarVisibility$.subscribe(e=>{this.sidebarVisible=e;const n=document.getElementById("contentMove");n&&(this.sidebarVisible?(n.style.width="calc(100% - 280px)",n.style.left="280px"):(n.style.width="100%",n.style.left="0"))})}getCustomers(){try{this.customerService.getCustomers(`${g.Q}/${this.pathRole}/ver/clientes`).subscribe({next:e=>{this.customers=e.customers,this.customers.forEach(n=>{if(n.createdAt){const L=n.createdAt.split("T")[0];n.createdAt=L}this.getPhotos(n.id)})},error:e=>{console.log(e.error.error)}})}catch(e){console.log(e.error)}}getPhotos(e){try{this.customerService.getPhotos(`${g.Q}/${this.pathRole}/ver/avatars`,e).subscribe({next:n=>{this.customerImages[e]=URL.createObjectURL(n)},error:n=>{this.customerImages[e]="assets/perfil_picture.png",console.log(n.error.error)}})}catch(n){console.log(n.error)}}deleteCustomer(e){try{this.customerService.deleteCustomer(`${g.Q}/superAdmin/eliminar/cliente`,e).subscribe({next:n=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getCustomers()},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Error",n.error.error)}})}catch(n){console.log(n.error)}}activateCustomer(e){try{this.customerService.activateCustomer(`${g.Q}/superAdmin/activar/cliente`,e).subscribe({next:n=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getCustomers()},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Error",n.error.error)}})}catch(n){console.log(n.error)}}getCustomerName(e){return e.Nombre_Cliente.toLowerCase().replace(/ /g,"-")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.p),t.Y36(C.e),t.Y36(M),t.Y36(O.y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-customers"]],decls:37,vars:1,consts:[["id","main-content"],[1,"d-flex","justify-content-center"],[1,"col-md-9","mt-4"],[1,"container"],[1,"row","d-flex","justify-content-center"],["id","contentMove",1,"table-data"],[1,"order"],[1,"head"],[1,"bx","bx-search"],[1,"bx","bx-filter"],[1,"text-center"],[4,"ngFor","ngForOf"],["alt","Foto-Perfil-Cliente",3,"src"],["class","status active",4,"ngIf"],["class","status pending",4,"ngIf"],["class","status inactive",4,"ngIf"],["title","Ver",1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"fa","fa-search"],["class","btn btn-sm btn-success","title","Activar",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger","title","Desactivar",3,"click",4,"ngIf"],[1,"status","active"],[1,"status","pending"],[1,"status","inactive"],["title","Activar",1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-check"],["title","Desactivar",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-times"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav-bar"),t.TgZ(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h2"),t._uU(10,"Clientes"),t.qZA(),t._UZ(11,"i",8)(12,"i",9),t.qZA(),t.TgZ(13,"table")(14,"thead")(15,"tr")(16,"th",10)(17,"h5"),t._uU(18,"Nombre"),t.qZA()(),t.TgZ(19,"th",10)(20,"h5"),t._uU(21,"Tel\xe9fono"),t.qZA()(),t.TgZ(22,"th",10)(23,"h5"),t._uU(24,"Correo"),t.qZA()(),t.TgZ(25,"th",10)(26,"h5"),t._uU(27,"Fecha de Creaci\xf3n"),t.qZA()(),t.TgZ(28,"th",10)(29,"h5"),t._uU(30,"Estado"),t.qZA()(),t.TgZ(31,"th",10)(32,"h5"),t._uU(33,"Acciones"),t.qZA()()()(),t.TgZ(34,"tbody"),t.YNc(35,Z,23,15,"tr",11),t.qZA()()()()()(),t._UZ(36,"app-footer"),t.qZA()()()),2&e&&(t.xp6(35),t.Q6J("ngForOf",n.customers))},dependencies:[u.sg,u.O5,d.rH,m.w,p.c],styles:[".container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;grid-gap:24px;margin-top:24px;margin-bottom:30px;width:100%;color:#342e37}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:20px;background:#F9F9F9;padding:24px;overflow-x:auto}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:16px;margin-bottom:24px}.content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-right:auto;font-size:24px;font-weight:600}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .bx[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]{flex-grow:1;flex-basis:500px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-bottom:12px;font-size:13px;text-align:left;border-bottom:1px solid #eee}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 0}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{display:flex;align-items:center;grid-gap:12px;padding-left:6px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;object-fit:cover}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#eee}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:10px;padding:6px 16px;color:#f9f9f9;border-radius:20px;font-weight:700}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.active[_ngcontent-%COMP%]{background:#22c73b;font-weight:700;font-size:14px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.pending[_ngcontent-%COMP%]{background:#3C91E6;font-weight:700;font-size:14px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.inactive[_ngcontent-%COMP%]{background:#FD7238;font-weight:700;font-size:14px}"]}),o})()},{path:"view/customer/:id/:name",component:_}];let w=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(T),d.Bz]}),o})();var y=c(592);let S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,w,y.g]}),o})()}}]);