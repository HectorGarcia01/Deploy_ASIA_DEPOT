"use strict";(self.webpackChunkFrontend_ASIA_DEPOT=self.webpackChunkFrontend_ASIA_DEPOT||[]).push([[763],{5763:(x,d,c)=>{c.r(d),c.d(d,{AuthModule:()=>k});var m=c(6895),n=c(433),u=c(5808),v=c(1548),t=c(8256),f=c(9616),p=c(6428),g=c(2150),h=c(3310);function b(e,a){1&e&&(t.TgZ(0,"div",18),t._uU(1," El correo es obligatorio. "),t.qZA())}function F(e,a){1&e&&(t.TgZ(0,"div",18),t._uU(1," El correo no es v\xe1lido. "),t.qZA())}function Z(e,a){1&e&&(t.TgZ(0,"div",18),t._uU(1," La contrase\xf1a es obligatoria. "),t.qZA())}const T=function(){return["/login"]},S=function(){return["/signup"]},w=function(){return["/login/activate/account"]};let _=(()=>{class e{constructor(r,o,i,l){this.fb=r,this.authService=o,this.customAlertService=i,this.router=l,this.validateForm()}ngOnInit(){this.scrollToTop()}validateForm(){this.loginForm=new n.cw({correo:new n.NI("",[n.kI.required,n.kI.email]),password:new n.NI("",[n.kI.required])})}singIn(){try{if(this.loginForm.valid){const r={correo:this.loginForm.get("correo")?.value,password:this.loginForm.get("password")?.value};this.authService.singIn(`${v.Q}/usuario/login`,r).subscribe({next:o=>{this.authService.saveCookieAuth(o.userToken),this.authService.saveCookieRole(o.userRole),"Admin"===o.userRole||"SuperAdmin"===o.userRole?(this.employeeData=o.user,this.customAlertService.sweetAlertPersonalizada("success","Exitoso",`Bienvenido ${this.employeeData.Nombre_Empleado} ${this.employeeData.Apellido_Empleado}`),this.router.navigate(["/admin"])):(this.customerData=o.user,this.customAlertService.sweetAlertPersonalizada("success","Exitoso",`Bienvenido ${this.customerData.Nombre_Cliente} ${this.customerData.Apellido_Cliente}`),this.router.navigate(["/home"]))},error:o=>{this.customAlertService.sweetAlertPersonalizada("error","Error",o.error.error)}})}else this.customAlertService.sweetAlertPersonalizada("error","Error","Todos los campos son obligatorios")}catch(r){console.log(r.error)}}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(n.qu),t.Y36(f.e),t.Y36(p.y),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:38,vars:10,consts:[[1,"container","mt-4","mb-5"],[1,"row","justify-content-center"],[1,"col-md-4"],[1,"tab-content"],["id","pills-login","role","tabpanel","aria-labelledby","tab-login",1,"tab-pane","fade","show","active"],[1,"border","border-2","border-dark","p-5",3,"formGroup","ngSubmit"],[1,"text-center","mb-5"],[1,"form-outline","mb-4"],["for","loginName",1,"form-label"],["type","email","formControlName","correo","id","loginName",1,"form-control"],["class","text-danger",4,"ngIf"],["for","loginPassword",1,"form-label"],["type","password","formControlName","password","id","loginPassword",1,"form-control"],[1,"row","mb-4"],[1,"col-md-12","d-flex","justify-content-center"],[3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-block","w-75"],[1,"text-center"],[1,"text-danger"]],template:function(r,o){if(1&r&&(t._UZ(0,"app-nav-bar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"form",5),t.NdJ("ngSubmit",function(){return o.singIn()}),t.TgZ(7,"h1",6),t._uU(8,"Iniciar Sesi\xf3n"),t.qZA(),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Correo"),t.qZA(),t._UZ(12,"input",9),t.YNc(13,b,2,0,"div",10),t.YNc(14,F,2,0,"div",10),t.qZA(),t.TgZ(15,"div",7)(16,"label",11),t._uU(17,"Contrase\xf1a"),t.qZA(),t._UZ(18,"input",12),t.YNc(19,Z,2,0,"div",10),t.qZA(),t.TgZ(20,"div",13)(21,"div",14)(22,"a",15),t._uU(23,"\xbfOlvid\xf3 la contrase\xf1a?"),t.qZA()()(),t.TgZ(24,"div",13)(25,"div",14)(26,"button",16),t._uU(27,"Iniciar sesi\xf3n"),t.qZA()()(),t.TgZ(28,"div",17)(29,"p"),t._uU(30,"\xbfNo posees una cuenta? "),t.TgZ(31,"a",15),t._uU(32,"Reg\xedstrate"),t.qZA()(),t.TgZ(33,"p"),t._uU(34,"\xbfT\xfa cuenta no est\xe1 activa? "),t.TgZ(35,"a",15),t._uU(36,"Act\xedvala"),t.qZA()()()()()()()()(),t._UZ(37,"app-footer")),2&r){let i,l,s;t.xp6(6),t.Q6J("formGroup",o.loginForm),t.xp6(7),t.Q6J("ngIf",(null==(i=o.loginForm.get("correo"))?null:i.hasError("required"))&&(null==(i=o.loginForm.get("correo"))?null:i.touched)),t.xp6(1),t.Q6J("ngIf",(null==(l=o.loginForm.get("correo"))?null:l.hasError("email"))&&(null==(l=o.loginForm.get("correo"))?null:l.touched)),t.xp6(5),t.Q6J("ngIf",(null==(s=o.loginForm.get("password"))?null:s.hasError("required"))&&(null==(s=o.loginForm.get("password"))?null:s.touched)),t.xp6(3),t.Q6J("routerLink",t.DdM(7,T)),t.xp6(9),t.Q6J("routerLink",t.DdM(8,S)),t.xp6(4),t.Q6J("routerLink",t.DdM(9,w))}},dependencies:[m.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,u.rH,g.w,h.c]}),e})();var A=c(529);let y=(()=>{class e{constructor(r){this.http=r}activateAccount(r,o){const i=new A.WM({Authorization:`Bearer ${o}`});return this.http.post(r,null,{headers:i})}}return e.\u0275fac=function(r){return new(r||e)(t.LFG(A.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function C(e,a){1&e&&(t.TgZ(0,"div",16),t._uU(1," El token es obligatorio. "),t.qZA())}const U=function(){return["/signup"]},I=function(){return["/login"]},E=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:_},{path:"login/activate/account",component:(()=>{class e{constructor(r,o,i){this.activateAccountService=r,this.customAlertService=o,this.router=i,this.validateForm()}ngOnInit(){}validateForm(){this.activateForm=new n.cw({token:new n.NI("",[n.kI.required])})}onSubmit(){try{if(this.activateForm.valid){const r=this.activateForm.get("token")?.value;this.activateAccountService.activateAccount(`${v.Q}/usuario/activar/cuenta`,r).subscribe({next:o=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",o.msg),this.router.navigate(["/login"])},error:o=>{console.log(o),this.customAlertService.sweetAlertPersonalizada("error","Error",o.error.error)}})}else this.customAlertService.sweetAlertPersonalizada("error","Campo vac\xedo","Para activar tu cuenta debes ingresar el token.")}catch(r){console.log(r.error)}}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(y),t.Y36(p.y),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-activate-account"]],decls:28,vars:6,consts:[[1,"container","mt-4","mb-5"],[1,"row","justify-content-center"],[1,"col-md-4"],[1,"tab-content"],["id","pills-login","role","tabpanel","aria-labelledby","tab-login",1,"tab-pane","fade","show","active"],[1,"border","border-2","border-dark","p-5",3,"formGroup","ngSubmit"],[1,"text-center","mb-5"],[1,"form-outline","mb-4"],["for","loginName",1,"form-label"],["type","text","formControlName","token","id","loginName",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"row","mb-4"],[1,"col-md-12","d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","btn-block","w-75"],[1,"text-center"],[3,"routerLink"],[1,"text-danger"]],template:function(r,o){if(1&r&&(t._UZ(0,"app-nav-bar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"form",5),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(7,"h1",6),t._uU(8,"Activa tu cuenta"),t.qZA(),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Token de activaci\xf3n"),t.qZA(),t._UZ(12,"input",9),t.YNc(13,C,2,0,"div",10),t.qZA(),t.TgZ(14,"div",11)(15,"div",12)(16,"button",13),t._uU(17,"Activar Cuenta"),t.qZA()()(),t.TgZ(18,"div",14)(19,"p"),t._uU(20,"\xbfNo posees una cuenta? "),t.TgZ(21,"a",15),t._uU(22,"Reg\xedstrate"),t.qZA()(),t.TgZ(23,"p"),t._uU(24,"\xbfT\xfa cuenta est\xe1 activa? "),t.TgZ(25,"a",15),t._uU(26,"Inicia Sesi\xf3n"),t.qZA()()()()()()()()(),t._UZ(27,"app-footer")),2&r){let i;t.xp6(6),t.Q6J("formGroup",o.activateForm),t.xp6(7),t.Q6J("ngIf",(null==(i=o.activateForm.get("token"))?null:i.hasError("required"))&&(null==(i=o.activateForm.get("token"))?null:i.touched)),t.xp6(8),t.Q6J("routerLink",t.DdM(4,U)),t.xp6(4),t.Q6J("routerLink",t.DdM(5,I))}},dependencies:[m.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,u.rH,g.w,h.c]}),e})()}];let J=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(E),u.Bz]}),e})();var N=c(335);let k=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,n.UX,n.u5,J,N.d]}),e})()}}]);