"use strict";(self.webpackChunkFrontend_ASIA_DEPOT=self.webpackChunkFrontend_ASIA_DEPOT||[]).push([[291],{2291:($,P,a)=>{a.r(P),a.d(P,{ProductManagementModule:()=>U});var g=a(6895),p=a(5808),t=a(8256),l=a(4554),h=a(7482);let m=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-new-product"]],decls:7,vars:0,consts:[["id","main-content"],[1,"d-flex","justify-content-center"],[1,"col-md-9","mt-4"],[1,"container"],[1,"row","d-flex","justify-content-center"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav-bar"),t.TgZ(2,"section",1)(3,"div",2)(4,"div",3),t._UZ(5,"div",4),t.qZA(),t._UZ(6,"app-footer"),t.qZA()()())},dependencies:[l.w,h.c]}),o})();var d=a(1548),C=a(2327),_=a(9616),s=a(529);let M=(()=>{class o{constructor(e,n){this.http=e,this.authService=n}createProduct(e,n){const c=this.authService.getCookieAuth(),i=new s.WM({Authorization:`Bearer ${c}`});return this.http.post(e,n,{headers:i})}uploadProductPhoto(e,n){const c=this.authService.getCookieAuth(),i=new s.WM({Authorization:`Bearer ${c}`}),u=new FormData;return u.append("avatar",n),this.http.post(e,u,{headers:i})}getProducts(e){const n=this.authService.getCookieAuth(),c=new s.WM({Authorization:`Bearer ${n}`});return this.http.get(e,{headers:c})}getPhotos(e,n){const c=this.authService.getCookieAuth(),i=new s.WM({Authorization:`Bearer ${c}`});return this.http.get(e=`${e}/${n}`,{headers:i,responseType:"blob"})}getProductId(e,n){const c=this.authService.getCookieAuth(),i=new s.WM({Authorization:`Bearer ${c}`});return this.http.get(e=`${e}/${n}`,{headers:i})}deleteProduct(e,n){const c=this.authService.getCookieAuth(),i=new s.WM({Authorization:`Bearer ${c}`});return this.http.delete(e=`${e}/${n}`,{headers:i})}deleteProductPhoto(e){const n=this.authService.getCookieAuth(),c=new s.WM({Authorization:`Bearer ${n}`});return this.http.delete(e,{headers:c})}activateProduct(e,n){const c=this.authService.getCookieAuth(),i=new s.WM({Authorization:`Bearer ${c}`});return this.http.patch(e=`${e}/${n}`,null,{headers:i})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(s.eN),t.LFG(_.e))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var f=a(6428);function v(o,r){if(1&o&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function O(o,r){if(1&o&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function b(o,r){if(1&o&&(t.TgZ(0,"span",22),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function x(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit,i=t.oxw();return t.KtG(i.activateEmployee(c.id))}),t._UZ(1,"i",24),t.qZA()}}function A(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit,i=t.oxw();return t.KtG(i.deleteProduct(c.id))}),t._UZ(1,"i",26),t.qZA()}}const Z=function(o,r){return["/admin/view/admin",o,r]};function T(o,r){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",12),t.TgZ(3,"p"),t._uU(4),t.qZA()(),t.TgZ(5,"td",10)(6,"p"),t._uU(7),t.qZA()(),t.TgZ(8,"td",10)(9,"p"),t._uU(10),t.qZA()(),t.TgZ(11,"td",10)(12,"p"),t._uU(13),t.qZA()(),t.TgZ(14,"td",10)(15,"p"),t._uU(16),t.qZA()(),t.TgZ(17,"td",10),t.YNc(18,v,2,1,"span",13),t.YNc(19,O,2,1,"span",14),t.YNc(20,b,2,1,"span",15),t.qZA(),t.TgZ(21,"td",10)(22,"button",16),t._UZ(23,"i",17),t.qZA(),t.YNc(24,x,2,0,"button",18),t.YNc(25,A,2,0,"button",19),t.qZA()()),2&o){const e=r.$implicit,n=t.oxw();t.xp6(2),t.Q6J("src",n.productImages[e.id]||"assets/perfil_picture.png",t.LSH),t.xp6(2),t.Oqu(e.Nombre_Producto),t.xp6(3),t.hij("Q.",e.Precio_Venta,""),t.xp6(3),t.hij("Q.",e.Precio_Compra,""),t.xp6(3),t.Oqu(e.Cantidad_Stock),t.xp6(3),t.Oqu(e.createdAt),t.xp6(2),t.Q6J("ngIf","Activo"===e.estado.Tipo_Estado),t.xp6(1),t.Q6J("ngIf","Pendiente"===e.estado.Tipo_Estado),t.xp6(1),t.Q6J("ngIf","Inactivo"===e.estado.Tipo_Estado),t.xp6(2),t.Q6J("routerLink",t.WLB(12,Z,e.id,n.getProductName(e))),t.xp6(2),t.Q6J("ngIf","Inactivo"===e.estado.Tipo_Estado),t.xp6(1),t.Q6J("ngIf","Inactivo"!==e.estado.Tipo_Estado)}}const w=[{path:"",redirectTo:"create/product",pathMatch:"full"},{path:"create/product",component:m},{path:"list/products",component:(()=>{class o{constructor(e,n,c,i){this.toggleNavBarService=e,this.authService=n,this.productService=c,this.customAlertService=i,this.sidebarVisible=!1,this.products=[],this.productImages={},this.image="assets/transparent.png",this.permissions=!1,this.pathRole="",this.toggleNavbarStatus()}isSuperAdmin(){return"SuperAdmin"===this.authService.getCookieRole()?(this.pathRole="superAdmin",this.permissions=!0,!0):(this.pathRole="admin",this.permissions=!1,!1)}ngOnInit(){this.isSuperAdmin(),this.getProducts()}ngOnDestroy(){this.subscription.unsubscribe()}toggleNavbarStatus(){this.subscription=this.toggleNavBarService.sidebarVisibility$.subscribe(e=>{this.sidebarVisible=e;const n=document.getElementById("contentMove");n&&(this.sidebarVisible?(n.style.width="calc(100% - 280px)",n.style.left="280px"):(n.style.width="100%",n.style.left="0"))})}getProducts(){try{this.productService.getProducts(`${d.Q}/${this.pathRole}/ver/productos`).subscribe({next:e=>{this.products=e.products,this.products.forEach(n=>{if(n.createdAt){const u=n.createdAt.split("T")[0];n.createdAt=u}n.Precio_Compra||(n.Precio_Compra=0),this.getPhotos(n.id)})},error:e=>{console.log(e.error.error)}})}catch(e){console.log(e.error)}}getPhotos(e){try{this.productService.getPhotos(`${d.Q}/${this.pathRole}/ver/foto/producto`,e).subscribe({next:n=>{this.productImages[e]=URL.createObjectURL(n)},error:n=>{this.productImages[e]="assets/perfil_picture.png",console.log(n.error.error)}})}catch(n){console.log(n.error)}}deleteProduct(e){try{this.productService.deleteProduct(`${d.Q}/superAdmin/eliminar/producto`,e).subscribe({next:n=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getProducts()},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Error",n.error.error)}})}catch(n){console.log(n.error)}}activateEmployee(e){try{this.productService.activateProduct(`${d.Q}/superAdmin/activar/producto`,e).subscribe({next:n=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getProducts()},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Error",n.error.error)}})}catch(n){console.log(n.error)}}getProductName(e){return e.Nombre_Producto.toLowerCase().replace(/ /g,"-")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.p),t.Y36(_.e),t.Y36(M),t.Y36(f.y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-products"]],decls:40,vars:1,consts:[["id","main-content"],[1,"d-flex","justify-content-center"],[1,"col-md-9","mt-4"],[1,"container"],[1,"row","d-flex","justify-content-center"],["id","contentMove",1,"table-data"],[1,"order"],[1,"head"],[1,"bx","bx-search"],[1,"bx","bx-filter"],[1,"text-center"],[4,"ngFor","ngForOf"],["alt","Foto-Perfil-Admin",3,"src"],["class","status active",4,"ngIf"],["class","status pending",4,"ngIf"],["class","status inactive",4,"ngIf"],["title","Ver",1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"fa","fa-search"],["class","btn btn-sm btn-success","title","Activar",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger","title","Desactivar",3,"click",4,"ngIf"],[1,"status","active"],[1,"status","pending"],[1,"status","inactive"],["title","Activar",1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-check"],["title","Desactivar",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-times"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav-bar"),t.TgZ(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h2"),t._uU(10,"Productos"),t.qZA(),t._UZ(11,"i",8)(12,"i",9),t.qZA(),t.TgZ(13,"table")(14,"thead")(15,"tr")(16,"th",10)(17,"h5"),t._uU(18,"Nombre"),t.qZA()(),t.TgZ(19,"th",10)(20,"h5"),t._uU(21,"Precio Venta"),t.qZA()(),t.TgZ(22,"th",10)(23,"h5"),t._uU(24,"Precio Compra"),t.qZA()(),t.TgZ(25,"th",10)(26,"h5"),t._uU(27,"Stock"),t.qZA()(),t.TgZ(28,"th",10)(29,"h5"),t._uU(30,"Fecha de Creaci\xf3n"),t.qZA()(),t.TgZ(31,"th",10)(32,"h5"),t._uU(33,"Estado"),t.qZA()(),t.TgZ(34,"th",10)(35,"h5"),t._uU(36,"Acciones"),t.qZA()()()(),t.TgZ(37,"tbody"),t.YNc(38,T,26,15,"tr",11),t.qZA()()()()()(),t._UZ(39,"app-footer"),t.qZA()()()),2&e&&(t.xp6(38),t.Q6J("ngForOf",n.products))},dependencies:[g.sg,g.O5,p.rH,l.w,h.c],styles:[".container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;grid-gap:24px;margin-top:24px;margin-bottom:30px;width:100%;color:#342e37}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:20px;background:#F9F9F9;padding:24px;overflow-x:auto}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:16px;margin-bottom:24px}.content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-right:auto;font-size:24px;font-weight:600}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .bx[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]{flex-grow:1;flex-basis:500px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-bottom:12px;font-size:13px;text-align:left;border-bottom:1px solid #eee}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 0}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{display:flex;align-items:center;grid-gap:12px;padding-left:6px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;object-fit:cover}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#eee}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:10px;padding:6px 16px;color:#f9f9f9;border-radius:20px;font-weight:700}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.active[_ngcontent-%COMP%]{background:#22c73b;font-weight:700;font-size:14px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.pending[_ngcontent-%COMP%]{background:#3C91E6;font-weight:700;font-size:14px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.inactive[_ngcontent-%COMP%]{background:#FD7238;font-weight:700;font-size:14px}"]}),o})()},{path:"view/product/:id/:name",component:(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-product"]],decls:7,vars:0,consts:[["id","main-content"],[1,"d-flex","justify-content-center"],[1,"col-md-9","mt-4"],[1,"container"],[1,"row","d-flex","justify-content-center"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav-bar"),t.TgZ(2,"section",1)(3,"div",2)(4,"div",3),t._UZ(5,"div",4),t.qZA(),t._UZ(6,"app-footer"),t.qZA()()())},dependencies:[l.w,h.c]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(w),p.Bz]}),o})();var S=a(592);let U=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,y,S.g]}),o})()}}]);