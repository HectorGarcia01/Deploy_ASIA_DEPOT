"use strict";(self.webpackChunkFrontend_ASIA_DEPOT=self.webpackChunkFrontend_ASIA_DEPOT||[]).push([[188],{2188:(X,P,r)=>{r.r(P),r.d(P,{SalesManagementModule:()=>W});var _=r(6895),l=r(433),u=r(5808),g=r(1548),t=r(8256),h=r(2327),C=r(9616),p=r(529);let M=(()=>{class o{constructor(e,n){this.http=e,this.authService=n}getSalesInvoice(e,n,a){let c=new p.LE;n&&a&&(c=c.set("page",n.toString()).set("pageSize",a.toString()));const s=this.authService.getCookieAuth(),d=new p.WM({Authorization:`Bearer ${s}`});return this.http.get(e,{params:c,headers:d})}getSaleInvoiceId(e,n){const a=this.authService.getCookieAuth(),c=new p.WM({Authorization:`Bearer ${a}`});return this.http.get(e=`${e}/${n}`,{headers:c})}updateSaleInvoice(e,n){const a=this.authService.getCookieAuth(),c=new p.WM({Authorization:`Bearer ${a}`});return this.http.patch(e=`${e}/${n}`,null,{headers:c})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(p.eN),t.LFG(C.e))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var O=r(6428),m=r(4554),f=r(7482);function v(o,i){if(1&o&&(t.TgZ(0,"span",28),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function b(o,i){if(1&o&&(t.TgZ(0,"span",28),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function x(o,i){if(1&o&&(t.TgZ(0,"span",28),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function Z(o,i){if(1&o&&(t.TgZ(0,"span",29),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function T(o,i){if(1&o&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function S(o,i){if(1&o&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.estado.Tipo_Estado)}}function A(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,c=t.oxw();return t.KtG(c.SalesInvoiceProcess(a.id))}),t._UZ(1,"i",32),t.qZA()}}function I(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,c=t.oxw();return t.KtG(c.SalesInvoiceComplete(a.id))}),t._UZ(1,"i",32),t.qZA()}}const w=function(o,i){return["/admin/view/sale",o,i]};function y(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"td",17)(2,"p"),t._uU(3),t.qZA()(),t.TgZ(4,"td",17)(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"td",17)(8,"p"),t._uU(9),t.qZA()(),t.TgZ(10,"td",17)(11,"p"),t._uU(12),t.qZA()(),t.TgZ(13,"td",17),t.YNc(14,v,2,1,"span",21),t.YNc(15,b,2,1,"span",21),t.YNc(16,x,2,1,"span",21),t.YNc(17,Z,2,1,"span",22),t.YNc(18,T,2,1,"span",23),t.YNc(19,S,2,1,"span",23),t.qZA(),t.TgZ(20,"td",17)(21,"button",24),t._UZ(22,"i",25),t.qZA(),t.YNc(23,A,2,0,"button",26),t.YNc(24,I,2,0,"button",27),t.qZA()()),2&o){const e=i.$implicit;t.xp6(3),t.Oqu(e.Numero_Orden),t.xp6(3),t.hij("Q.",e.Total_Factura,""),t.xp6(3),t.AsE("",null==e.empleado?null:e.empleado.Nombre_Empleado," ",null==e.empleado?null:e.empleado.Apellido_Empleado,""),t.xp6(3),t.Oqu(e.createdAt),t.xp6(2),t.Q6J("ngIf","Carrito"===e.estado.Tipo_Estado),t.xp6(1),t.Q6J("ngIf","Pendiente"===e.estado.Tipo_Estado),t.xp6(1),t.Q6J("ngIf","En proceso"===e.estado.Tipo_Estado),t.xp6(1),t.Q6J("ngIf","Completado"===e.estado.Tipo_Estado),t.xp6(1),t.Q6J("ngIf","Cancelado"===e.estado.Tipo_Estado),t.xp6(1),t.Q6J("ngIf","Inactivo"===e.estado.Tipo_Estado),t.xp6(2),t.Q6J("routerLink",t.WLB(14,w,e.id,e.Numero_Orden)),t.xp6(2),t.Q6J("ngIf","Pendiente"===e.estado.Tipo_Estado),t.xp6(1),t.Q6J("ngIf","En proceso"===e.estado.Tipo_Estado)}}function q(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"li",36)(1,"a",41),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.changePage(c))}),t._uU(2),t.qZA()()}if(2&o){const e=i.$implicit,n=t.oxw(2);t.ekj("active",n.currentPage===e),t.xp6(2),t.Oqu(e)}}function E(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"nav",34)(1,"ul",35)(2,"li",36)(3,"a",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changePage(a.currentPage-1))}),t.TgZ(4,"span",38),t._uU(5,"\xab"),t.qZA()()(),t.YNc(6,q,3,3,"li",39),t.TgZ(7,"li",36)(8,"a",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changePage(a.currentPage+1))}),t.TgZ(9,"span",38),t._uU(10,"\xbb"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(2),t.ekj("disabled",1===e.currentPage),t.xp6(4),t.Q6J("ngForOf",e.getPagesArray()),t.xp6(1),t.ekj("disabled",e.currentPage===e.totalPages)}}let U=(()=>{class o{constructor(e,n,a,c){this.toggleNavBarService=e,this.authService=n,this.salesService=a,this.customAlertService=c,this.sidebarVisible=!1,this.salesInvoice=[],this.pathRole="",this.totalPages=0,this.currentPage=1,this.pageSize=10,this.searchQuery="",this.toggleNavbarStatus()}isSuperAdmin(){return"SuperAdmin"===this.authService.getCookieRole()?(this.pathRole="superAdmin",!0):(this.pathRole="admin",!1)}ngOnInit(){this.scrollToTop(),this.isSuperAdmin(),this.getSalesInvoice()}ngOnDestroy(){this.subscription.unsubscribe()}toggleNavbarStatus(){this.subscription=this.toggleNavBarService.sidebarVisibility$.subscribe(e=>{this.sidebarVisible=e;const n=document.getElementById("contentMove");n&&(this.sidebarVisible?(n.style.width="calc(100% - 280px)",n.style.left="280px"):(n.style.width="100%",n.style.left="0"))})}getSalesInvoice(){try{this.salesService.getSalesInvoice(`${g.Q}/${this.pathRole}/ver/ventas`,this.currentPage,this.pageSize).subscribe({next:e=>{this.salesInvoice=e.salesInvoice,this.totalPages=e.totalPages,this.currentPage=e.currentPage,this.salesInvoice.forEach(n=>{if(n.createdAt){const s=n.createdAt.split("T")[0];n.createdAt=s}})},error:e=>{console.log(e.error.error)}})}catch(e){console.log(e.error)}}onSearch(e){e.preventDefault(),this.searchSalesInvoice(this.searchQuery)}searchSalesInvoice(e){try{this.salesService.getSalesInvoice(`${g.Q}/${this.pathRole}/ver/ventas?estado=${e}`,this.currentPage,this.pageSize).subscribe({next:n=>{this.salesInvoice=n.salesInvoice,this.totalPages=n.totalPages,this.currentPage=n.currentPage,this.salesInvoice.forEach(a=>{if(a.createdAt){const d=a.createdAt.split("T")[0];a.createdAt=d}})},error:n=>{console.log(n.error.error)}})}catch(n){console.log(n.error)}}SalesInvoiceProcess(e){try{this.salesService.updateSaleInvoice(`${g.Q}/${this.pathRole}/actualizar/estado/venta/proceso`,e).subscribe({next:n=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getSalesInvoice()},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Error",n.error.error)}})}catch(n){console.log(n.error)}}SalesInvoiceComplete(e){try{this.salesService.updateSaleInvoice(`${g.Q}/${this.pathRole}/actualizar/estado/venta/completado`,e).subscribe({next:n=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getSalesInvoice()},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Error",n.error.error)}})}catch(n){console.log(n.error)}}changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.getSalesInvoice(),this.scrollToTop())}changePageSize(e){this.pageSize=+e.target.value,this.currentPage=1,this.getSalesInvoice()}getPagesArray(){const e=[];for(let n=1;n<=this.totalPages;n++)e.push(n);return e}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.p),t.Y36(C.e),t.Y36(M),t.Y36(O.y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-sales"]],decls:58,vars:15,consts:[["id","main-content"],[1,"d-flex","justify-content-center"],[1,"col-md-9","mt-4"],[1,"container"],[1,"row","d-flex","justify-content-center"],["id","contentMove",1,"table-data"],[1,"order"],[1,"head"],[3,"submit"],[1,"form-input"],["type","search","placeholder","Buscar por estado de venta","name","search",3,"ngModel","ngModelChange"],["type","submit",1,"search-btn"],[1,"bx","bx-search"],[1,"col-md-1","form-floating"],["aria-label","Default select example",1,"form-select",3,"change"],[3,"value","selected"],["for","registerShow"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-3"],["aria-label","Page navigation example",4,"ngIf"],["class","status pending",4,"ngIf"],["class","status active",4,"ngIf"],["class","status inactive",4,"ngIf"],["title","Ver",1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"fa","fa-search"],["class","btn btn-sm btn-primary","title","Procesar venta",3,"click",4,"ngIf"],["class","btn btn-sm btn-success","title","Completar venta",3,"click",4,"ngIf"],[1,"status","pending"],[1,"status","active"],[1,"status","inactive"],["title","Procesar venta",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-check"],["title","Completar venta",1,"btn","btn-sm","btn-success",3,"click"],["aria-label","Page navigation example"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"btn","page-link",3,"click"],["aria-hidden","true"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"btn","page-link",3,"click"],[1,"btn","page-link",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav-bar"),t.TgZ(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h2"),t._uU(10,"Ventas"),t.qZA(),t.TgZ(11,"form",8),t.NdJ("submit",function(c){return n.onSearch(c)}),t.TgZ(12,"div",9)(13,"input",10),t.NdJ("ngModelChange",function(c){return n.searchQuery=c}),t.qZA(),t.TgZ(14,"button",11),t._UZ(15,"i",12),t.qZA()()(),t.TgZ(16,"div",13)(17,"select",14),t.NdJ("change",function(c){return n.changePageSize(c)}),t.TgZ(18,"option",15),t._uU(19,"10"),t.qZA(),t.TgZ(20,"option",15),t._uU(21,"20"),t.qZA(),t.TgZ(22,"option",15),t._uU(23,"40"),t.qZA(),t.TgZ(24,"option",15),t._uU(25,"60"),t.qZA(),t.TgZ(26,"option",15),t._uU(27,"80"),t.qZA(),t.TgZ(28,"option",15),t._uU(29,"100"),t.qZA()(),t.TgZ(30,"label",16),t._uU(31,"Mostrar"),t.qZA()()(),t.TgZ(32,"table")(33,"thead")(34,"tr")(35,"th",17)(36,"h5"),t._uU(37,"No. de Orden"),t.qZA()(),t.TgZ(38,"th",17)(39,"h5"),t._uU(40,"Total"),t.qZA()(),t.TgZ(41,"th",17)(42,"h5"),t._uU(43,"Empleado"),t.qZA()(),t.TgZ(44,"th",17)(45,"h5"),t._uU(46,"Fecha de Creaci\xf3n"),t.qZA()(),t.TgZ(47,"th",17)(48,"h5"),t._uU(49,"Estado"),t.qZA()(),t.TgZ(50,"th",17)(51,"h5"),t._uU(52,"Acciones"),t.qZA()()()(),t.TgZ(53,"tbody"),t.YNc(54,y,25,17,"tr",18),t.qZA()(),t.TgZ(55,"div",19),t.YNc(56,E,11,5,"nav",20),t.qZA()()()()(),t._UZ(57,"app-footer"),t.qZA()()()),2&e&&(t.xp6(13),t.Q6J("ngModel",n.searchQuery),t.xp6(5),t.Q6J("value",10)("selected",10===n.pageSize),t.xp6(2),t.Q6J("value",20)("selected",20===n.pageSize),t.xp6(2),t.Q6J("value",40)("selected",40===n.pageSize),t.xp6(2),t.Q6J("value",60)("selected",60===n.pageSize),t.xp6(2),t.Q6J("value",80)("selected",80===n.pageSize),t.xp6(2),t.Q6J("value",100)("selected",100===n.pageSize),t.xp6(26),t.Q6J("ngForOf",n.salesInvoice),t.xp6(2),t.Q6J("ngIf",n.totalPages>1))},dependencies:[_.sg,_.O5,l._Y,l.YN,l.Kr,l.Fj,l.JJ,l.JL,l.On,l.F,u.rH,m.w,f.c],styles:[".head[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px;width:100%;margin-right:auto}.head[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{display:flex;align-items:center;height:36px}.head[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;padding:0 16px;height:100%;border:none;background:#eee;border-radius:36px 0 0 36px;outline:none;width:100%;color:#342e37}.head[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:100%;display:flex;justify-content:center;align-items:center;background:#3C91E6;color:#f9f9f9;font-size:18px;border:none;outline:none;border-radius:0 36px 36px 0;cursor:pointer}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;grid-gap:24px;margin-top:24px;margin-bottom:30px;width:100%;color:#342e37}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:20px;background:#F9F9F9;border:1px solid rgb(181,179,179);padding:24px;overflow-x:auto}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:16px;margin-bottom:24px}.content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-right:auto;font-size:24px;font-weight:600}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .bx[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]{flex-grow:1;flex-basis:500px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-bottom:12px;font-size:13px;text-align:left;border-bottom:1px solid #eee}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 0}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#eee}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:10px;padding:6px 16px;color:#f9f9f9;border-radius:20px;font-weight:700}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.active[_ngcontent-%COMP%]{background:#28a745;font-weight:700;font-size:14px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.pending[_ngcontent-%COMP%]{background:#007bff;font-weight:700;font-size:14px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.inactive[_ngcontent-%COMP%]{background:#dc3545;font-weight:700;font-size:14px}@media (max-width: 768px){.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{margin-top:10px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;padding:10px 0}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;border-bottom:1px solid #eee;padding:20px 0}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 0;text-align:center}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:15px;padding:6px 12px}}"]}),o})();var L=r(5960);function N(o,i){1&o&&(t.TgZ(0,"div",8)(1,"div",9)(2,"h5"),t._uU(3," Lo siento, el detalle de venta que est\xe1s buscando no ha sido encontrado. Verifica el n\xfamero de orden o selecciona otra venta. "),t.qZA(),t._UZ(4,"img",10),t.qZA()())}function k(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"td",14),t._UZ(2,"img",16),t.TgZ(3,"p"),t._uU(4),t.qZA()(),t.TgZ(5,"td",14)(6,"p"),t._uU(7),t.qZA()(),t.TgZ(8,"td",14)(9,"p"),t._uU(10),t.qZA()(),t.TgZ(11,"td",14)(12,"p"),t._uU(13),t.qZA()()()),2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("src",n.productImages[e.producto.id]||"assets/Logo_ASIA_DEPOT.png",t.LSH),t.xp6(2),t.Oqu(e.producto.Nombre_Producto),t.xp6(3),t.hij("Q.",e.Precio_Unitario,""),t.xp6(3),t.Oqu(e.Cantidad_Producto),t.xp6(3),t.Oqu(e.Subtotal_Venta)}}function z(o,i){if(1&o&&(t.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"h2"),t._uU(4,"Detalle Venta"),t.qZA()(),t.TgZ(5,"table")(6,"thead")(7,"tr")(8,"th",14)(9,"h5"),t._uU(10,"Productos"),t.qZA()(),t.TgZ(11,"th",14)(12,"h5"),t._uU(13,"Precio"),t.qZA()(),t.TgZ(14,"th",14)(15,"h5"),t._uU(16,"Cantidad"),t.qZA()(),t.TgZ(17,"th",14)(18,"h5"),t._uU(19,"Subtotal"),t.qZA()()()(),t.TgZ(20,"tbody"),t.YNc(21,k,14,5,"tr",15),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(21),t.Q6J("ngForOf",e.saleDetail.detalles_venta)}}function J(o,i){1&o&&(t.TgZ(0,"th",14)(1,"h5"),t._uU(2,"Acci\xf3n"),t.qZA()())}function Q(o,i){if(1&o&&(t.TgZ(0,"span",24),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.dataClient.Estado)}}function F(o,i){if(1&o&&(t.TgZ(0,"span",24),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.dataClient.Estado)}}function $(o,i){if(1&o&&(t.TgZ(0,"span",24),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.dataClient.Estado)}}function D(o,i){if(1&o&&(t.TgZ(0,"span",25),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.dataClient.Estado)}}function Y(o,i){if(1&o&&(t.TgZ(0,"span",26),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.dataClient.Estado)}}function R(o,i){if(1&o&&(t.TgZ(0,"span",26),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.dataClient.Estado)}}function j(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.SalesInvoiceProcess(a.saleDetail.id))}),t._UZ(1,"i",28),t.qZA()}}function B(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.SalesInvoiceComplete(a.saleDetail.id))}),t._UZ(1,"i",28),t.qZA()}}function V(o,i){if(1&o&&(t.TgZ(0,"div",17)(1,"div",12)(2,"div",13)(3,"h2"),t._uU(4),t.qZA()(),t.TgZ(5,"table")(6,"thead")(7,"tr")(8,"th",14)(9,"h5"),t._uU(10,"Cliente"),t.qZA()(),t.TgZ(11,"th",14)(12,"h5"),t._uU(13,"Fecha de Registro"),t.qZA()(),t.TgZ(14,"th",14)(15,"h5"),t._uU(16,"Total"),t.qZA()(),t.TgZ(17,"th",14)(18,"h5"),t._uU(19,"Estado"),t.qZA()(),t.YNc(20,J,3,0,"th",18),t.qZA()(),t.TgZ(21,"tbody")(22,"tr")(23,"td",14)(24,"p"),t._uU(25),t.qZA()(),t.TgZ(26,"td",14)(27,"p"),t._uU(28),t.qZA()(),t.TgZ(29,"td",14)(30,"p"),t._uU(31),t.qZA()(),t.TgZ(32,"td",14),t.YNc(33,Q,2,1,"span",19),t.YNc(34,F,2,1,"span",19),t.YNc(35,$,2,1,"span",19),t.YNc(36,D,2,1,"span",20),t.YNc(37,Y,2,1,"span",21),t.YNc(38,R,2,1,"span",21),t.qZA(),t.TgZ(39,"td",14),t.YNc(40,j,2,0,"button",22),t.YNc(41,B,2,0,"button",23),t.qZA()()()()()()),2&o){const e=t.oxw();t.xp6(4),t.hij("Orden #",e.saleDetail.Numero_Orden,""),t.xp6(16),t.Q6J("ngIf",!0===e.buttonVisible),t.xp6(5),t.AsE("",e.dataClient.Nombre," ",e.dataClient.Apellido,""),t.xp6(3),t.Oqu(e.saleDetail.createdAt),t.xp6(3),t.hij("Q.",e.saleDetail.Total_Factura,""),t.xp6(2),t.Q6J("ngIf","Carrito"===e.dataClient.Estado),t.xp6(1),t.Q6J("ngIf","Pendiente"===e.dataClient.Estado),t.xp6(1),t.Q6J("ngIf","En proceso"===e.dataClient.Estado),t.xp6(1),t.Q6J("ngIf","Completado"===e.dataClient.Estado),t.xp6(1),t.Q6J("ngIf","Cancelado"===e.dataClient.Estado),t.xp6(1),t.Q6J("ngIf","Inactivo"===e.dataClient.Estado),t.xp6(2),t.Q6J("ngIf","Pendiente"===e.dataClient.Estado),t.xp6(1),t.Q6J("ngIf","En proceso"===e.dataClient.Estado)}}const G=[{path:"",redirectTo:"list/sales",pathMatch:"full"},{path:"list/sales",component:U},{path:"view/sale/:id/:order",component:(()=>{class o{constructor(e,n,a,c,s,d){this.toggleNavBarService=e,this.authService=n,this.productService=a,this.route=c,this.salesService=s,this.customAlertService=d,this.sidebarVisible=!1,this.dataClient={},this.saleDetail={},this.productImages={},this.pathRole="",this.error404=!1,this.buttonVisible=!1,this.toggleNavbarStatus()}isSuperAdmin(){return"SuperAdmin"===this.authService.getCookieRole()?(this.pathRole="superAdmin",!0):(this.pathRole="admin",!1)}ngOnInit(){this.scrollToTop(),this.isSuperAdmin(),this.getParamsId()}ngOnDestroy(){this.subscription.unsubscribe()}toggleNavbarStatus(){this.subscription=this.toggleNavBarService.sidebarVisibility$.subscribe(e=>{this.sidebarVisible=e;const n=document.getElementById("contentMove"),a=document.getElementById("contentMoveTwo");n&&a&&(this.sidebarVisible?(n.style.width="calc(100% - 280px)",n.style.left="280px",a.style.width="calc(100% - 280px)",a.style.left="280px"):(n.style.width="100%",n.style.left="0",a.style.width="100%",a.style.left="0"))})}getParamsId(){this.route.paramMap.subscribe(e=>{const n=e.get("id");n&&this.getSalesDetail(n)})}getSalesDetail(e){try{this.salesService.getSaleInvoiceId(`${g.Q}/${this.pathRole}/ver/venta`,e).subscribe({next:n=>{this.saleDetail=n.salesInvoice,this.dataClient.Nombre=this.saleDetail.cliente.Nombre_Cliente,this.dataClient.Apellido=this.saleDetail.cliente.Apellido_Cliente,this.dataClient.Estado=this.saleDetail.estado.Tipo_Estado;const s=this.saleDetail.createdAt.split("T")[0];this.saleDetail.createdAt=s,this.buttonVisible="Pendiente"===this.saleDetail.estado.Tipo_Estado||"En proceso"===this.saleDetail.estado.Tipo_Estado,this.saleDetail.detalles_venta.forEach(d=>{this.getPhotos(d.producto.id)}),this.error404=!1},error:n=>{this.error404=!0,console.log(n.error.error)}})}catch(n){console.log(n.error)}}getPhotos(e){try{this.productService.getPhotos(`${g.Q}/${this.pathRole}/ver/foto/producto`,e).subscribe({next:n=>{this.productImages[e]=URL.createObjectURL(n)},error:n=>{this.productImages[e]="assets/Logo_ASIA_DEPOT.png",console.log(n.error.error)}})}catch(n){console.log(n.error)}}SalesInvoiceProcess(e){try{this.salesService.updateSaleInvoice(`${g.Q}/${this.pathRole}/actualizar/estado/venta/proceso`,e).subscribe({next:n=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getParamsId()},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Error",n.error.error)}})}catch(n){console.log(n.error)}}SalesInvoiceComplete(e){try{this.salesService.updateSaleInvoice(`${g.Q}/${this.pathRole}/actualizar/estado/venta/completado`,e).subscribe({next:n=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",n.msg),this.getParamsId()},error:n=>{this.customAlertService.sweetAlertPersonalizada("error","Error",n.error.error)}})}catch(n){console.log(n.error)}}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.p),t.Y36(C.e),t.Y36(L.U),t.Y36(u.gz),t.Y36(M),t.Y36(O.y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-sale"]],decls:10,vars:3,consts:[["id","main-content"],[1,"d-flex","justify-content-center"],[1,"col-md-9","mt-4"],[1,"container"],[1,"row","d-flex","justify-content-center"],["class","row justify-content-center align-items-center",4,"ngIf"],["class","table-data","id","contentMove",4,"ngIf"],["class","table-data","id","contentMoveTwo",4,"ngIf"],[1,"row","justify-content-center","align-items-center"],[1,"col-12","text-center","mt-5"],["width","500","height","500","src","assets/404_2.jpg","alt","Error 404",1,"img-fluid","rounded-circle"],["id","contentMove",1,"table-data"],[1,"order"],[1,"head"],[1,"text-center"],[4,"ngFor","ngForOf"],["alt","Imagen-Producto",3,"src"],["id","contentMoveTwo",1,"table-data"],["class","text-center",4,"ngIf"],["class","status pending",4,"ngIf"],["class","status active",4,"ngIf"],["class","status inactive",4,"ngIf"],["class","btn btn-sm btn-primary","title","Procesar venta",3,"click",4,"ngIf"],["class","btn btn-sm btn-success","title","Completar venta",3,"click",4,"ngIf"],[1,"status","pending"],[1,"status","active"],[1,"status","inactive"],["title","Procesar venta",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-check"],["title","Completar venta",1,"btn","btn-sm","btn-success",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav-bar"),t.TgZ(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4),t.YNc(6,N,5,0,"div",5),t.YNc(7,z,22,1,"div",6),t.YNc(8,V,42,14,"div",7),t.qZA()(),t._UZ(9,"app-footer"),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("ngIf",1==n.error404),t.xp6(1),t.Q6J("ngIf",0==n.error404),t.xp6(1),t.Q6J("ngIf",0==n.error404))},dependencies:[_.sg,_.O5,m.w,f.c],styles:[".head[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:400px;width:100%;margin-right:auto}.head[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{display:flex;align-items:center;height:36px}.head[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;padding:0 16px;height:100%;border:none;background:#eee;border-radius:36px 0 0 36px;outline:none;width:100%;color:#342e37}.head[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:100%;display:flex;justify-content:center;align-items:center;background:#3C91E6;color:#f9f9f9;font-size:18px;border:none;outline:none;border-radius:0 36px 36px 0;cursor:pointer}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;grid-gap:24px;margin-top:24px;margin-bottom:30px;width:100%;color:#342e37}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:20px;background:#F9F9F9;border:1px solid rgb(181,179,179);padding:24px;overflow-x:auto}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:16px;margin-bottom:24px}.content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-right:auto;font-size:24px;font-weight:600}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .bx[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]{flex-grow:1;flex-basis:500px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-bottom:12px;font-size:13px;text-align:left;border-bottom:1px solid #eee}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 0}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{display:flex;align-items:center;grid-gap:12px;padding-left:6px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;object-fit:cover}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#eee}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:10px;padding:6px 16px;color:#f9f9f9;border-radius:20px;font-weight:700}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.active[_ngcontent-%COMP%]{background:#28a745;font-weight:700;font-size:14px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.pending[_ngcontent-%COMP%]{background:#007bff;font-weight:700;font-size:14px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status.inactive[_ngcontent-%COMP%]{background:#dc3545;font-weight:700;font-size:14px}@media (max-width: 768px){.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{margin-top:10px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px;padding:10px 0}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;border-bottom:1px solid #eee;padding:20px 0}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 0;text-align:center}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]   .order[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:15px;padding:6px 12px}}"]}),o})()}];let H=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(G),u.Bz]}),o})();var K=r(592);let W=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[_.ez,l.u5,H,K.g]}),o})()}}]);