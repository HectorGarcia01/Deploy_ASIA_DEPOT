"use strict";(self.webpackChunkFrontend_ASIA_DEPOT=self.webpackChunkFrontend_ASIA_DEPOT||[]).push([[268],{7268:(F,g,s)=>{s.r(g),s.d(g,{ShoppingCartModule:()=>I});var u=s(6895),i=s(433),d=s(5808),l=s(1548),t=s(8256),h=s(3650),m=s(3809),_=s(6785),b=s(6428),f=s(2150),v=s(3310);function C(e,n){1&e&&(t.TgZ(0,"div",6)(1,"div",7)(2,"h5"),t._uU(3," Tu carrito de compras est\xe1 vac\xedo, intenta agregar un producto. "),t.qZA(),t._UZ(4,"img",8),t.qZA()())}function x(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"tr")(1,"td",12)(2,"div",14)(3,"div",15),t._UZ(4,"img",16),t.qZA(),t.TgZ(5,"div",17),t._uU(6),t.qZA()()(),t.TgZ(7,"td",18),t._uU(8),t.qZA(),t.TgZ(9,"td",12)(10,"div",19)(11,"div",20)(12,"button",21),t.NdJ("click",function(){const a=t.CHM(o).$implicit,p=t.oxw(2);return t.KtG(p.decreaseQuantity(a))}),t._UZ(13,"i",22),t.qZA()(),t._UZ(14,"input",23),t.TgZ(15,"div",20)(16,"button",24),t.NdJ("click",function(){const a=t.CHM(o).$implicit,p=t.oxw(2);return t.KtG(p.increaseQuantity(a))}),t._UZ(17,"i",25),t.qZA()()()(),t.TgZ(18,"td",18),t._uU(19),t.qZA(),t.TgZ(20,"td",18)(21,"button",26),t.NdJ("click",function(){const a=t.CHM(o).$implicit,p=t.oxw(2);return t.KtG(p.updateProductCart(a.producto.id,a.Cantidad_Producto))}),t._UZ(22,"i",27),t.qZA()(),t.TgZ(23,"td",18)(24,"button",28),t.NdJ("click",function(){const a=t.CHM(o).$implicit,p=t.oxw(2);return t.KtG(p.deleteProductCart(a.producto.id))}),t._UZ(25,"i",29),t.qZA()()()}if(2&e){const o=n.$implicit,r=t.oxw(2);t.xp6(4),t.Q6J("src",r.productImages[o.producto.id]||"assets/Logo_ASIA_DEPOT.png",t.LSH),t.xp6(2),t.hij(" ",o.producto.nombre_producto," "),t.xp6(2),t.hij("Q.",o.Precio_Unitario,""),t.xp6(6),t.s9C("value",o.Cantidad_Producto),t.xp6(5),t.hij("Q.",o.Subtotal_Venta,"")}}function Z(e,n){if(1&e&&(t.TgZ(0,"table",9)(1,"thead",10)(2,"tr",11)(3,"th"),t._uU(4,"Productos"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Precio"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Cantidad"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Subtotal"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Actualizar"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Eliminar"),t.qZA()()(),t.TgZ(15,"tbody",12),t.YNc(16,x,26,5,"tr",13),t.qZA()()),2&e){const o=t.oxw();t.xp6(16),t.Q6J("ngForOf",o.shoppingDetailCart.detalles_venta)}}function S(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(o);const c=t.oxw(2);return t.KtG(c.onSubmit())}),t._uU(1,"Procesar compra"),t.qZA()}}function P(e,n){1&e&&(t.TgZ(0,"button",41),t._UZ(1,"span",42),t._uU(2," Cargando... "),t.qZA())}function A(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",30)(1,"div",31)(2,"h5",32),t._uU(3,"Resumen de la compra"),t.qZA(),t.TgZ(4,"div",33)(5,"div",34)(6,"h5"),t._uU(7,"Total"),t.qZA(),t.TgZ(8,"h5"),t._uU(9),t.qZA()(),t.TgZ(10,"div",35)(11,"div",36),t.YNc(12,S,2,0,"button",37),t.YNc(13,P,3,0,"button",38),t.TgZ(14,"button",39),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.deleteShoppingCart())}),t._uU(15,"Vaciar carrito"),t.qZA()()()()()()}if(2&e){const o=t.oxw();t.xp6(9),t.hij("Q.",o.shoppingDetailCart.Total_Factura,""),t.xp6(3),t.Q6J("ngIf",!1===o.loading),t.xp6(1),t.Q6J("ngIf",!0===o.loading)}}function T(e,n){if(1&e&&(t.TgZ(0,"div",30)(1,"div",43)(2,"h5",32),t._uU(3,"Informaci\xf3n personal"),t.qZA(),t.TgZ(4,"div",44)(5,"p")(6,"strong"),t._uU(7,"Nombre: "),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"strong"),t._uU(11,"Tel\xe9fono: "),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p")(14,"strong"),t._uU(15,"NIT: "),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"p")(18,"strong"),t._uU(19,"Direcci\xf3n: "),t.qZA(),t._uU(20),t.qZA(),t.TgZ(21,"div",35)(22,"a",45),t._uU(23,"Actualizar Datos"),t.qZA()()()()()),2&e){const o=t.oxw();t.xp6(8),t.AsE("",o.customer.Nombre_Cliente," ",o.customer.Apellido_Cliente,""),t.xp6(4),t.Oqu(o.customer.Telefono_Cliente),t.xp6(4),t.Oqu(o.customer.NIT_Cliente),t.xp6(4),t.Oqu(o.customer.Direccion_General),t.xp6(2),t.Q6J("routerLink","/profile/update")}}function y(e,n){if(1&e&&(t.TgZ(0,"option",53),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij("",o.Nombre_Envio," ")}}function U(e,n){if(1&e&&(t.TgZ(0,"option",53),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij("",o.Tipo_Pago," ")}}function M(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",30)(1,"div",31)(2,"h5",32),t._uU(3,"Informaci\xf3n de env\xedo"),t.qZA(),t.TgZ(4,"form",46),t.NdJ("ngSubmit",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.onSubmit())}),t.TgZ(5,"div",47)(6,"select",48)(7,"option",49),t._uU(8,"Selecciona un tipo de env\xedo"),t.qZA(),t.YNc(9,y,2,2,"option",50),t.qZA(),t.TgZ(10,"label",51),t._uU(11,"Tipo de env\xedo"),t.qZA()(),t.TgZ(12,"div",47)(13,"select",52)(14,"option",49),t._uU(15,"Selecciona un m\xe9todo de pago"),t.qZA(),t.YNc(16,U,2,2,"option",50),t.qZA(),t.TgZ(17,"label",51),t._uU(18,"M\xe9todo de pago"),t.qZA()()()()()}if(2&e){const o=t.oxw();t.xp6(4),t.Q6J("formGroup",o.registerForm),t.xp6(5),t.Q6J("ngForOf",o.shipping_type),t.xp6(7),t.Q6J("ngForOf",o.payment_method)}}const O=[{path:"",redirectTo:"checkout/cart",pathMatch:"full"},{path:"checkout/cart",component:(()=>{class e{constructor(o,r,c,a){this.shoppingCartService=o,this.productService=r,this.userService=c,this.customAlertService=a,this.shoppingDetailCart={},this.shipping_type=[],this.payment_method=[],this.customer={},this.productImages={},this.noneProducts=!1,this.loading=!1,this.validateForm()}ngOnInit(){this.scrollToTop(),this.getShoppingCart()}validateForm(){this.registerForm=new i.cw({tipo_envio:new i.NI(null,[i.kI.required,i.kI.pattern("^[0-9]+$")]),metodo_pago:new i.NI(null,[i.kI.required,i.kI.pattern("^[0-9]+$")])})}getShoppingCart(){try{this.shoppingCartService.getShoppingCart(`${l.Q}/usuario/carrito/ver`).subscribe({next:o=>{this.shoppingDetailCart=o.shoppingDetailCart,this.shoppingDetailCart.Total_Factura=this.shoppingDetailCart.Total_Factura.toFixed(2),this.getProfile(),this.getShipmentInformation(),this.noneProducts=0!==this.shoppingDetailCart.detalles_venta.length,this.shoppingDetailCart.detalles_venta.forEach(r=>{this.getPhotos(r.producto.id)})},error:o=>{this.noneProducts=!1}})}catch(o){console.log(o.error)}}getPhotos(o){try{this.productService.getProductPhoto(`${l.Q}/usuario/ver/foto/producto`,o).subscribe({next:r=>{this.productImages[o]=URL.createObjectURL(r)},error:r=>{this.productImages[o]="assets/Logo_ASIA_DEPOT.png",console.log(r.error.error)}})}catch(r){console.log(r.error)}}getProfile(){try{this.userService.getCustomerProfile(`${l.Q}/usuario/ver/perfil`).subscribe({next:o=>{this.customer=o.customer},error:o=>{this.customAlertService.sweetAlertPersonalizada("error","Error",o.error.error)}})}catch(o){console.log(o.error)}}getShipmentInformation(){try{this.shoppingCartService.getShipmentInformation(`${l.Q}/usuario/ver/tipo/envio`).subscribe({next:o=>{this.shipping_type=o.shipping_type,this.payment_method=o.payment_method},error:o=>{this.customAlertService.sweetAlertPersonalizada("error","Error",o.error.error)}})}catch(o){console.log(o.error)}}updateProductCart(o,r){try{this.shoppingCartService.updateProductCart(`${l.Q}/usuario/carrito/actualizar/producto`,{ID_Producto_FK:o,Cantidad_Producto:r}).subscribe({next:a=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",a.msg),this.getShoppingCart()},error:a=>{this.customAlertService.sweetAlertPersonalizada("error","Error",a.error.error),this.getShoppingCart()}})}catch(c){console.log(c.error)}}deleteProductCart(o){try{this.shoppingCartService.deleteProductCart(`${l.Q}/usuario/carrito/eliminar/producto`,o).subscribe({next:r=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",r.msg),this.getShoppingCart()},error:r=>{this.customAlertService.sweetAlertPersonalizada("error","Error",r.error.error)}})}catch(r){console.log(r.error)}}deleteShoppingCart(){try{this.shoppingCartService.deleteShoppingCart(`${l.Q}/usuario/carrito/eliminar`).subscribe({next:o=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",o.msg),this.getShoppingCart()},error:o=>{this.customAlertService.sweetAlertPersonalizada("error","Error",o.error.error)}})}catch(o){console.log(o.error)}}onSubmit(){try{const o={ID_Tipo_Envio_FK:this.registerForm.get("tipo_envio")?.value,ID_Metodo_Pago_FK:this.registerForm.get("metodo_pago")?.value};this.registerForm.valid?(this.loading=!0,this.shoppingCartService.processSale(`${l.Q}/usuario/carrito/procesar`,o).subscribe({next:r=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",r.msg),this.loading=!1,this.getShoppingCart()},error:r=>{this.customAlertService.sweetAlertPersonalizada("error","Error",r.error.error)}})):this.customAlertService.sweetAlertPersonalizada("error","Campos vac\xedos","Por favor completa la informaci\xf3n de env\xedo.")}catch(o){console.log(o.error)}}decreaseQuantity(o){o.Cantidad_Producto>1&&(o.Cantidad_Producto--,o.Subtotal_Venta=(o.Cantidad_Producto*o.Precio_Unitario).toFixed(2))}increaseQuantity(o){o.Cantidad_Producto++,o.Subtotal_Venta=(o.Cantidad_Producto*o.Precio_Unitario).toFixed(2)}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(h.F),t.Y36(m.M),t.Y36(_.v),t.Y36(b.y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-shopping"]],decls:10,vars:5,consts:[[1,"container-fluid","mt-4"],[1,"row","px-xl-5"],[1,"col-lg-8","table-responsive","mb-3"],["class","justify-content-center align-items-center",4,"ngIf"],["class","table table-light table-borderless table-hover mb-0",4,"ngIf"],["class","col-lg-4",4,"ngIf"],[1,"justify-content-center","align-items-center"],[1,"col-12","text-center"],["width","300","height","300","src","assets/404.jpg","alt","Error 404",1,"img-fluid","rounded-circle"],[1,"table","table-light","table-borderless","table-hover","mb-0"],[1,"thead-dark"],[1,"text-center"],[1,"align-middle"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-column","flex-md-row"],[1,"col-md-2"],["alt","Imagen-Producto",2,"width","50px",3,"src"],[1,"col-md-5"],[1,"align-middle","text-center"],[1,"input-group","quantity","mx-auto",2,"width","100px"],[1,"input-group-btn"],[1,"btn","btn-sm","btn-primary","btn-minus",3,"click"],[1,"fa","fa-minus"],["type","text",1,"form-control","form-control-sm","border-2","text-center",3,"value"],[1,"btn","btn-sm","btn-primary","btn-plus",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-check"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-times"],[1,"col-lg-4"],[1,"bg-light","p-5","mb-5"],[1,"mb-3","text-center"],[1,"pt-3"],[1,"d-flex","justify-content-between","mt-3"],[1,"d-flex","justify-content-center"],[1,"col-10","d-flex","justify-content-between"],["class","btn btn-block btn-primary font-weight-bold my-3 py-3",3,"click",4,"ngIf"],["type","button","class","btn btn-block btn-primary font-weight-bold my-3 py-3","disabled","",4,"ngIf"],[1,"btn","btn-block","btn-danger","font-weight-bold","my-3","py-3",3,"click"],[1,"btn","btn-block","btn-primary","font-weight-bold","my-3","py-3",3,"click"],["type","button","disabled","",1,"btn","btn-block","btn-primary","font-weight-bold","my-3","py-3"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"bg-light","p-3","mb-5"],[1,"pt-2"],[1,"btn","btn-primary","btn-block","font-weight-bold","my-3","py-3",3,"routerLink"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["aria-label","Default select example","formControlName","tipo_envio",1,"form-select"],["value","null"],[3,"value",4,"ngFor","ngForOf"],["for","registerDepartamento"],["aria-label","Default select example","formControlName","metodo_pago",1,"form-select"],[3,"value"]],template:function(o,r){1&o&&(t._UZ(0,"app-nav-bar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2),t.YNc(4,C,5,0,"div",3),t.YNc(5,Z,17,1,"table",4),t.qZA(),t.YNc(6,A,16,3,"div",5),t.YNc(7,T,24,6,"div",5),t.YNc(8,M,19,3,"div",5),t.qZA()(),t._UZ(9,"app-footer")),2&o&&(t.xp6(4),t.Q6J("ngIf",0==r.noneProducts),t.xp6(1),t.Q6J("ngIf",1==r.noneProducts),t.xp6(1),t.Q6J("ngIf",1==r.noneProducts),t.xp6(1),t.Q6J("ngIf",1==r.noneProducts),t.xp6(1),t.Q6J("ngIf",1==r.noneProducts))},dependencies:[u.sg,u.O5,i._Y,i.YN,i.Kr,i.EJ,i.JJ,i.JL,i.sg,i.u,d.rH,f.w,v.c],styles:[".table[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;color:#6c757d}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;vertical-align:top;border-top:1px solid #dee2e6}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:bottom;border-bottom:2px solid #dee2e6}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] + tbody[_ngcontent-%COMP%]{border-top:2px solid #dee2e6}.table-borderless[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-borderless[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-borderless[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-borderless[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%] + tbody[_ngcontent-%COMP%]{border:0}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{color:#6c757d;background-color:#00000013}.table[_ngcontent-%COMP%]   .thead-dark[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff;background-color:#343a40;border-color:#454d55}.table-responsive[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.table-responsive[_ngcontent-%COMP%] > .table-bordered[_ngcontent-%COMP%]{border:0}"]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(O),d.Bz]}),e})();var q=s(335);let I=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,i.UX,i.u5,w,q.d]}),e})()}}]);