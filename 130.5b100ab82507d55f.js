"use strict";(self.webpackChunkFrontend_ASIA_DEPOT=self.webpackChunkFrontend_ASIA_DEPOT||[]).push([[130],{130:(S,m,r)=>{r.r(m),r.d(m,{AuthModule:()=>y});var d=r(6895),t=r(433),a=r(5808),g=r(1548),o=r(8256),p=r(9616),v=r(6428),f=r(2150),h=r(3310);function A(e,l){1&e&&(o.TgZ(0,"div",20),o._uU(1," El correo es obligatorio. "),o.qZA())}function b(e,l){1&e&&(o.TgZ(0,"div",20),o._uU(1," El correo no es v\xe1lido. "),o.qZA())}function Z(e,l){1&e&&(o.TgZ(0,"div",20),o._uU(1," La contrase\xf1a es obligatoria. "),o.qZA())}const F=function(){return["/login"]},T=function(){return["/signup"]},C=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class e{constructor(i,n,s,u){this.fb=i,this.authService=n,this.customAlertService=s,this.router=u,this.customerData=[],this.validateForm()}ngOnInit(){}validateForm(){this.loginForm=new t.cw({correo:new t.NI("",[t.kI.required,t.kI.email]),password:new t.NI("",[t.kI.required])})}singIn(){if(this.loginForm.valid){const i={correo:this.loginForm.get("correo")?.value,password:this.loginForm.get("password")?.value};this.authService.singIn(`${g.Q}/usuario/login`,i).subscribe(n=>{this.authService.saveCookieAuth(),this.authService.saveCookieRole(n.userRole),"Admin"===n.userRole||"SuperAdmin"===n.userRole?(this.customAlertService.sweetAlertPersonalizada("success","Exitoso",`Bienvenido ${n.user.Nombre_Empleado} ${n.user.Apellido_Empleado}`),this.router.navigate(["/admin"])):(this.customerData=n.user,this.customAlertService.sweetAlertPersonalizada("success","Exitoso",`Bienvenido ${n.user.Nombre_Cliente} ${n.user.Apellido_Cliente}`),this.router.navigate(["/home"]))},n=>{console.log(n.error),this.customAlertService.sweetAlertPersonalizada("error","Error",n.error.error)})}}}return e.\u0275fac=function(i){return new(i||e)(o.Y36(t.qu),o.Y36(p.e),o.Y36(v.y),o.Y36(a.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:39,vars:8,consts:[[1,"container","mt-2","mb-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"tab-content"],["id","pills-login","role","tabpanel","aria-labelledby","tab-login",1,"tab-pane","fade","show","active"],[1,"border","border-2","border-dark","p-5",3,"formGroup","ngSubmit"],[1,"text-center","mb-3"],["type","button",1,"btn","btn-secondary","btn-floating","mx-1"],[1,"fab","fa-google"],[1,"text-center"],[1,"form-outline","mb-4"],["for","loginName",1,"form-label"],["type","email","formControlName","correo","id","loginName",1,"form-control"],["class","text-danger",4,"ngIf"],["for","loginPassword",1,"form-label"],["type","password","formControlName","password","id","loginPassword",1,"form-control"],[1,"row","mb-4"],[1,"col-md-12","d-flex","justify-content-center"],[3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-block","w-75"],[1,"text-danger"]],template:function(i,n){if(1&i&&(o._UZ(0,"app-nav-bar"),o.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"form",5),o.NdJ("ngSubmit",function(){return n.singIn()}),o.TgZ(7,"div",6)(8,"p"),o._uU(9,"Inicia sesi\xf3n con:"),o.qZA(),o.TgZ(10,"button",7),o._UZ(11,"i",8),o.qZA()(),o.TgZ(12,"p",9),o._uU(13,"o:"),o.qZA(),o.TgZ(14,"div",10)(15,"label",11),o._uU(16,"Correo"),o.qZA(),o._UZ(17,"input",12),o.YNc(18,A,2,0,"div",13),o.YNc(19,b,2,0,"div",13),o.qZA(),o.TgZ(20,"div",10)(21,"label",14),o._uU(22,"Contrase\xf1a"),o.qZA(),o._UZ(23,"input",15),o.YNc(24,Z,2,0,"div",13),o.qZA(),o.TgZ(25,"div",16)(26,"div",17)(27,"a",18),o._uU(28,"\xbfOlvid\xf3 la contrase\xf1a?"),o.qZA()()(),o.TgZ(29,"div",16)(30,"div",17)(31,"button",19),o._uU(32,"Iniciar sesi\xf3n"),o.qZA()()(),o.TgZ(33,"div",9)(34,"p"),o._uU(35,"\xbfNo posees una cuenta? "),o.TgZ(36,"a",18),o._uU(37,"Reg\xedstrate"),o.qZA()()()()()()()()(),o._UZ(38,"app-footer")),2&i){let s,u,c;o.xp6(6),o.Q6J("formGroup",n.loginForm),o.xp6(12),o.Q6J("ngIf",(null==(s=n.loginForm.get("correo"))?null:s.hasError("required"))&&(null==(s=n.loginForm.get("correo"))?null:s.touched)),o.xp6(1),o.Q6J("ngIf",(null==(u=n.loginForm.get("correo"))?null:u.hasError("email"))&&(null==(u=n.loginForm.get("correo"))?null:u.touched)),o.xp6(5),o.Q6J("ngIf",(null==(c=n.loginForm.get("password"))?null:c.hasError("required"))&&(null==(c=n.loginForm.get("password"))?null:c.touched)),o.xp6(3),o.Q6J("routerLink",o.DdM(6,F)),o.xp6(9),o.Q6J("routerLink",o.DdM(7,T))}},dependencies:[d.O5,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,a.rH,f.w,h.c]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[a.Bz.forChild(C),a.Bz]}),e})();var U=r(335);let y=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[d.ez,t.UX,t.u5,I,U.d]}),e})()}}]);