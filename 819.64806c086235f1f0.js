"use strict";(self.webpackChunkFrontend_ASIA_DEPOT=self.webpackChunkFrontend_ASIA_DEPOT||[]).push([[819],{9819:(ne,F,s)=>{s.r(F),s.d(F,{UserProfileModule:()=>ie});var m=s(6895),i=s(433),g=s(5808),c=s(1548),e=s(8256),A=s(9616),x=s(6785),S=s(69),q=s(870),P=s(6428),T=s(2150),C=s(3310);let w=(()=>{class o{constructor(t,r,l,a,u){this.authService=t,this.userService=r,this.sharedService=l,this.newsletterService=a,this.customAlertService=u,this.customer={},this.image="assets/transparent.png"}ngOnInit(){this.scrollToTop(),this.viewProfile(),this.getProfilePicture()}viewProfile(){try{this.userService.getCustomerProfile(`${c.Q}/usuario/ver/perfil`).subscribe({next:t=>{this.customer=t.customer},error:t=>{this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})}catch(t){console.log(t.error)}}getProfilePicture(){try{this.authService.isAuthenticated()?this.userService.getProfilePhoto(`${c.Q}/usuario/ver/avatar`).subscribe({next:t=>{this.image=URL.createObjectURL(t)},error:t=>{this.image="assets/perfil_picture.png"}}):this.image="assets/perfil_picture.png"}catch(t){console.log(t.error)}}deleteProfilePicture(){try{this.userService.deleteProfilePhoto(`${c.Q}/usuario/eliminar/avatar`).subscribe({next:t=>{this.image="assets/perfil_picture.png",this.customAlertService.sweetAlertPersonalizada("success","Exitoso",t.msg),this.sharedService.profileImageUpdated.emit("assets/perfil_picture.png")},error:t=>{this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})}catch(t){console.log(t.error)}}unsubscriptionNewsletter(){try{this.newsletterService.unsubscriptionNewsletter(`${c.Q}/usuario/anular/suscripcion/newsletter`).subscribe({next:t=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",t.msg)},error:t=>{this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})}catch(t){console.log(t.error)}}logout(){try{this.authService.logout().subscribe({next:t=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",t.msg),this.authService.deleteCookie()},error:t=>{this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})}catch(t){console.log(t.error)}}logoutAll(){try{this.authService.logoutAll().subscribe({next:t=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",t.msg),this.authService.deleteCookie()},error:t=>{this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})}catch(t){console.log(t.error)}}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.e),e.Y36(x.v),e.Y36(S.F),e.Y36(q.B),e.Y36(P.y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile"]],decls:94,vars:14,consts:[[1,"container"],[1,"row","d-flex","justify-content-center"],[1,"col-md-9","bg-light","mb-3"],[1,"d-flex","flex-column","flex-md-row","align-items-center","justify-content-center"],[1,"col-md-4"],["alt","Foto-Perfil",1,"img-fluid","rounded-circle",3,"src"],[1,"col-md-9","mb-5"],[1,"d-flex","flex-column","flex-md-row","align-items-center","justify-content-between"],[1,"col-md-6","bg-light","p-5","mb-5","container-info"],[1,"mb-4"],[1,"mb-3"],["for","nombre"],["id","nombre"],["for","apellido"],["id","apellido"],["for","correo"],["id","correo"],["for","telefono"],["id","telefono"],["for","nit"],["id","nit"],["for","departamento"],["id","departamento"],["for","municipio"],["id","municipio"],["for","direccion_general"],["id","direccion_general"],[1,"col-md-5","bg-light","p-5"],[1,"d-flex","flex-column","btnAction"],[1,"btn","btn-primary","btn-block",3,"routerLink"],[1,"btn","btn-primary","btn-block"],[1,"btn","btn-danger","btn-block",3,"click"]],template:function(t,r){1&t&&(e._UZ(0,"app-nav-bar"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"img",5),e.qZA(),e.TgZ(7,"div",4)(8,"h1"),e._uU(9),e.qZA(),e.TgZ(10,"h1"),e._uU(11),e.qZA()()()(),e.TgZ(12,"div",6)(13,"div",7)(14,"div",8)(15,"h3",9),e._uU(16,"Informaci\xf3n personal"),e.qZA(),e.TgZ(17,"div",10)(18,"label",11)(19,"strong"),e._uU(20,"Nombre"),e.qZA()(),e.TgZ(21,"p",12),e._uU(22),e.qZA()(),e.TgZ(23,"div",10)(24,"label",13)(25,"strong"),e._uU(26,"Apellido"),e.qZA()(),e.TgZ(27,"p",14),e._uU(28),e.qZA()(),e.TgZ(29,"div",10)(30,"label",15)(31,"strong"),e._uU(32,"Correo"),e.qZA()(),e.TgZ(33,"p",16),e._uU(34),e.qZA()(),e.TgZ(35,"div",10)(36,"label",17)(37,"strong"),e._uU(38,"Tel\xe9fono"),e.qZA()(),e.TgZ(39,"p",18),e._uU(40),e.qZA()(),e.TgZ(41,"div",10)(42,"label",19)(43,"strong"),e._uU(44,"NIT"),e.qZA()(),e.TgZ(45,"p",20),e._uU(46),e.qZA()(),e.TgZ(47,"div",10)(48,"label",21)(49,"strong"),e._uU(50,"Departamento"),e.qZA()(),e.TgZ(51,"p",22),e._uU(52),e.qZA()(),e.TgZ(53,"div",10)(54,"label",23)(55,"strong"),e._uU(56,"Municipio"),e.qZA()(),e.TgZ(57,"p",24),e._uU(58),e.qZA()(),e.TgZ(59,"div",10)(60,"label",25)(61,"strong"),e._uU(62,"Direcci\xf3n general"),e.qZA()(),e.TgZ(63,"p",26),e._uU(64),e.qZA()()(),e.TgZ(65,"div",27)(66,"h3",9),e._uU(67,"Acciones"),e.qZA(),e.TgZ(68,"div",28)(69,"div",10)(70,"a",29),e._uU(71,"Actualizar Datos"),e.qZA()(),e.TgZ(72,"div",10)(73,"a",29),e._uU(74,"Cambiar Contrase\xf1a"),e.qZA()(),e.TgZ(75,"div",10)(76,"a",29),e._uU(77,"Productos Favoritos"),e.qZA()(),e.TgZ(78,"div",10)(79,"a",30),e._uU(80,"Historial de Compras"),e.qZA()(),e.TgZ(81,"div",10)(82,"a",31),e.NdJ("click",function(){return r.deleteProfilePicture()}),e._uU(83,"Borrar Foto de Perfil"),e.qZA()(),e.TgZ(84,"div",10)(85,"a",31),e.NdJ("click",function(){return r.unsubscriptionNewsletter()}),e._uU(86,"Anular Suscripci\xf3n del Newsletter"),e.qZA()(),e.TgZ(87,"div",10)(88,"a",31),e.NdJ("click",function(){return r.logout()}),e._uU(89,"Cerrar Sesi\xf3n"),e.qZA()(),e.TgZ(90,"div",10)(91,"a",31),e.NdJ("click",function(){return r.logoutAll()}),e._uU(92,"Cerrar Todas las Sesiones"),e.qZA()()()()()()()(),e._UZ(93,"app-footer")),2&t&&(e.xp6(6),e.s9C("src",r.image,e.LSH),e.xp6(3),e.Oqu(r.customer.Nombre_Cliente),e.xp6(2),e.Oqu(r.customer.Apellido_Cliente),e.xp6(11),e.Oqu(r.customer.Nombre_Cliente),e.xp6(6),e.Oqu(r.customer.Apellido_Cliente),e.xp6(6),e.Oqu(r.customer.Correo_Cliente),e.xp6(6),e.Oqu(r.customer.Telefono_Cliente),e.xp6(6),e.Oqu(r.customer.NIT_Cliente),e.xp6(6),e.Oqu(null==r.customer.municipio||null==r.customer.municipio.departamento?null:r.customer.municipio.departamento.Nombre_Departamento),e.xp6(6),e.Oqu(null==r.customer.municipio?null:r.customer.municipio.Nombre_Municipio),e.xp6(6),e.Oqu(r.customer.Direccion_General),e.xp6(6),e.Q6J("routerLink","/profile/update"),e.xp6(3),e.Q6J("routerLink","/profile/change-password"),e.xp6(3),e.Q6J("routerLink","/profile/favorite/products"))},dependencies:[g.rH,T.w,C.c],styles:[".btnAction[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{max-width:300px;width:100%}"]}),o})();function I(o,n){1&o&&(e.TgZ(0,"div",36),e._uU(1," El nombre es demasiado corto (m\xednimo 3 car\xe1cteres). "),e.qZA())}function E(o,n){1&o&&(e.TgZ(0,"div",36),e._uU(1," El nombre es demasiado largo (m\xe1ximo 30 car\xe1cteres). "),e.qZA())}function N(o,n){1&o&&(e.TgZ(0,"div",36),e._uU(1," El nombre no es v\xe1lido, no use car\xe1cteres especiales. "),e.qZA())}function y(o,n){1&o&&(e.TgZ(0,"div",36),e._uU(1," El apellido es demasiado corto (m\xednimo 3 car\xe1cteres). "),e.qZA())}function O(o,n){1&o&&(e.TgZ(0,"div",36),e._uU(1," El apellido es demasiado largo (m\xe1ximo 30 car\xe1cteres). "),e.qZA())}function M(o,n){1&o&&(e.TgZ(0,"div",36),e._uU(1," El apellido no es v\xe1lido, no use car\xe1cteres especiales. "),e.qZA())}function k(o,n){1&o&&(e.TgZ(0,"div",36),e._uU(1," El tel\xe9fono no es v\xe1lido, debe de poseer 8 d\xedgitos. "),e.qZA())}function J(o,n){1&o&&(e.TgZ(0,"div",36),e._uU(1," El NIT no es v\xe1lido. "),e.qZA())}function Q(o,n){if(1&o&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",t.Nombre_Departamento," ")}}function D(o,n){if(1&o&&(e.TgZ(0,"option",37),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.Nombre_Municipio)}}function Y(o,n){1&o&&(e.TgZ(0,"div",36),e._uU(1," La direcci\xf3n no es v\xe1lida, no use car\xe1cteres especiales. "),e.qZA())}function z(o,n){1&o&&(e.TgZ(0,"div",36),e._uU(1," La direcci\xf3n es demasiado corta (m\xednimo 10 car\xe1cteres). "),e.qZA())}function L(o,n){1&o&&(e.TgZ(0,"div",36),e._uU(1," La direcci\xf3n es demasiado larga (m\xe1ximo 100 car\xe1cteres). "),e.qZA())}let j=(()=>{class o{constructor(t,r,l,a,u){this.fb=t,this.authService=r,this.userService=l,this.customAlertService=a,this.router=u,this.departments=[],this.selectedDepartmentId=null,this.selectedMunicipalityId=null,this.municipalities=[],this.image="assets/transparent.png",this.uploading=!1,this.previewImage=null,this.validateForm()}ngOnInit(){this.scrollToTop(),this.getProfilePicture(),this.getAddresses()}getProfilePicture(){try{this.authService.isAuthenticated()?this.userService.getProfilePhoto(`${c.Q}/usuario/ver/avatar`).subscribe({next:t=>{this.image=URL.createObjectURL(t)},error:t=>{this.image="assets/perfil_picture.png"}}):this.image="assets/perfil_picture.png"}catch(t){console.log(t.error)}}getAddresses(){this.userService.getAddress(`${c.Q}/usuario/ver/direcciones`).subscribe(t=>{this.departments=t.address})}onDepartmentSelected(t){const r=t.target.value;if(null!==r){this.selectedDepartmentId=Number(r);const l=this.departments.find(a=>a.id===this.selectedDepartmentId);this.municipalities=l?l.municipios:[]}else this.municipalities=[];this.updateForm.get("municipio")?.setValue(null)}validateForm(){this.updateForm=new i.cw({nombre:new i.NI("",[i.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\xfc\xdc\s]+$/),i.kI.minLength(3),i.kI.maxLength(30)]),apellido:new i.NI("",[i.kI.pattern(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\xfc\xdc\s]+$/),i.kI.minLength(3),i.kI.maxLength(30)]),telefono:new i.NI("",[i.kI.pattern(/^[345][0-9]{7}$/)]),nit:new i.NI("",[i.kI.pattern("^[0-9]+$")]),direccion:new i.NI("",[i.kI.pattern(/^[^[\]<>(){}_=\\|';]+$/),i.kI.minLength(10),i.kI.maxLength(100)]),departamento:new i.NI(null,[i.kI.pattern("^[0-9]+$")]),municipio:new i.NI(null,[i.kI.pattern("^[0-9]+$")])})}getUserData(){const t={Nombre_Cliente:this.updateForm.get("nombre")?.value,Apellido_Cliente:this.updateForm.get("apellido")?.value,Telefono_Cliente:this.updateForm.get("telefono")?.value,NIT_Cliente:this.updateForm.get("nit")?.value,Direccion_General:this.updateForm.get("direccion")?.value,ID_Departamento_FK:this.updateForm.get("departamento")?.value,ID_Municipio_FK:this.updateForm.get("municipio")?.value};for(const r in t)t.hasOwnProperty(r)&&(null==t[r]||""===t[r])&&delete t[r];return 0===Object.keys(t).length?null:t}onSubmit(){try{if(this.updateForm.valid){const t=this.getUserData();if(t?.ID_Departamento_FK&&!t?.ID_Municipio_FK)return this.customAlertService.sweetAlertPersonalizada("error","Datos incompletos","Debes escoger un municipio.");if(!t)return this.customAlertService.sweetAlertPersonalizada("success","Sin cambios","No has realizado ning\xfan cambio."),this.router.navigate(["/profile"]);this.userService.updateCustomer(`${c.Q}/usuario/actualizar/perfil`,t).subscribe({next:r=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",r.msg),this.updateForm.reset(),this.router.navigate(["/profile"])},error:r=>{this.customAlertService.sweetAlertPersonalizada("error","Error",r.error.error)}})}else this.customAlertService.sweetAlertPersonalizada("error","Error","Por favor, verifica los campos del formulario.")}catch(t){console.log(t.error)}}onUploadAvatar(){try{this.selectedFile?(this.uploading=!0,this.userService.uploadProfilePhoto(`${c.Q}/usuario/subir/avatar`,this.selectedFile).subscribe({next:t=>{this.uploading=!1,this.customAlertService.sweetAlertPersonalizada("success","Exitoso",t.msg),this.router.navigate(["/profile"])},error:t=>{this.uploading=!1,this.customAlertService.sweetAlertPersonalizada("error","Error",t.error.error)}})):this.customAlertService.sweetAlertPersonalizada("error","Im\xe1gen no seleccionada","Por favor selecciona una im\xe1gen.")}catch(t){console.log(t.error)}}onFileSelected(t){const r=t.target;if(r.files&&r.files.length>0){const l=r.files[0],a=l.name.split(".").pop()?.toLowerCase();if(a)if(["jpg","jpeg","png"].includes(a)){this.selectedFile=l;const d=new FileReader;d.onload=p=>{this.previewImage=p.target?.result},d.readAsDataURL(l)}else this.customAlertService.sweetAlertPersonalizada("error","Archivo no v\xe1lido","Selecciona un archivo con una extensi\xf3n v\xe1lida (.jpg, .jpeg o .png).");else this.customAlertService.sweetAlertPersonalizada("error","Archivo no v\xe1lido","No se pudo determinar la extensi\xf3n del archivo.")}}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(A.e),e.Y36(x.v),e.Y36(P.y),e.Y36(g.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-update-profile"]],decls:70,vars:16,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-12","mb-5"],[1,"d-flex","flex-column","flex-md-row","align-items-center","justify-content-center"],[1,"col-md-4","bg-light","p-5","mb-5",2,"margin-right","20px"],["alt","Foto de Perfil",1,"img-fluid","rounded-circle",3,"src"],[3,"ngSubmit"],[1,"mt-3"],[1,"form-group"],["id","formFile","type","file","accept",".png, .jpg, .jpeg","name","avatar","required","",1,"mt-3","form-control",3,"change"],[1,"row","mb-4"],[1,"col-md-12","d-flex","justify-content-center","mt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"col-md-5","bg-light","p-5","mb-5"],[1,"text-center","mb-3"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","formControlName","nombre","placeholder","Ingresa tu nombre",1,"form-control"],["for","registerName"],["class","text-danger",4,"ngIf"],["type","text","formControlName","apellido","placeholder","Ingresa tu apellido",1,"form-control"],["for","registerUsername"],["type","text","formControlName","telefono","placeholder","Ingresa tu n\xfamero de tel\xe9fono",1,"form-control"],["for","registerTel"],["type","number","formControlName","nit","placeholder","Ingresa tu NIT",1,"form-control"],["for","registerNIT"],["aria-label","Default select example","formControlName","departamento",1,"form-select",3,"change"],["value","null"],[3,"value",4,"ngFor","ngForOf"],["for","registerDepartamento"],["aria-label","Default select example","formControlName","municipio",1,"form-select"],["for","registerMunicipio"],["id","floatingTextarea2","minlength","10","maxlength","101","formControlName","direccion","placeholder","Ingresa tu direcci\xf3n general",1,"form-control",2,"max-height","100px"],["for","registerAddress"],[1,"col-md-12","d-flex","justify-content-center","mt-3"],["type","submit",1,"btn","btn-primary","btn-block","w-75"],[1,"text-danger"],[3,"value"]],template:function(t,r){if(1&t&&(e._UZ(0,"app-nav-bar"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"img",5),e.TgZ(7,"form",6),e.NdJ("ngSubmit",function(){return r.onUploadAvatar()}),e.TgZ(8,"div",7)(9,"div",8)(10,"input",9),e.NdJ("change",function(a){return r.onFileSelected(a)}),e.qZA()(),e.TgZ(11,"div",10)(12,"div",11)(13,"button",12),e._uU(14,"Subir Foto"),e.qZA()()()()()(),e.TgZ(15,"div",13)(16,"div",14)(17,"h2"),e._uU(18,"Actualizar datos personales"),e.qZA()(),e.TgZ(19,"form",15),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(20,"div",16),e._UZ(21,"input",17),e.TgZ(22,"label",18),e._uU(23,"Nombre"),e.qZA(),e.YNc(24,I,2,0,"div",19),e.YNc(25,E,2,0,"div",19),e.YNc(26,N,2,0,"div",19),e.qZA(),e.TgZ(27,"div",16),e._UZ(28,"input",20),e.TgZ(29,"label",21),e._uU(30,"Apellido"),e.qZA(),e.YNc(31,y,2,0,"div",19),e.YNc(32,O,2,0,"div",19),e.YNc(33,M,2,0,"div",19),e.qZA(),e.TgZ(34,"div",16),e._UZ(35,"input",22),e.TgZ(36,"label",23),e._uU(37,"Tel\xe9fono"),e.qZA(),e.YNc(38,k,2,0,"div",19),e.qZA(),e.TgZ(39,"div",16),e._UZ(40,"input",24),e.TgZ(41,"label",25),e._uU(42,"NIT"),e.qZA(),e.YNc(43,J,2,0,"div",19),e.qZA(),e.TgZ(44,"div",16)(45,"select",26),e.NdJ("change",function(a){return r.onDepartmentSelected(a)}),e.TgZ(46,"option",27),e._uU(47,"Selecciona un departamento"),e.qZA(),e.YNc(48,Q,2,2,"option",28),e.qZA(),e.TgZ(49,"label",29),e._uU(50,"Departamento"),e.qZA()(),e.TgZ(51,"div",16)(52,"select",30)(53,"option",27),e._uU(54,"Selecciona un municipio"),e.qZA(),e.YNc(55,D,2,2,"option",28),e.qZA(),e.TgZ(56,"label",31),e._uU(57,"Municipio"),e.qZA()(),e.TgZ(58,"div",16),e._UZ(59,"textarea",32),e.TgZ(60,"label",33),e._uU(61,"Direcci\xf3n general"),e.qZA(),e.YNc(62,Y,2,0,"div",19),e.YNc(63,z,2,0,"div",19),e.YNc(64,L,2,0,"div",19),e.qZA(),e.TgZ(65,"div",10)(66,"div",34)(67,"button",35),e._uU(68,"Actualizar datos"),e.qZA()()()()()()()()(),e._UZ(69,"app-footer")),2&t){let l,a,u,d,p,f,v,h,_,b,Z;e.xp6(6),e.s9C("src",r.previewImage||r.image,e.LSH),e.xp6(7),e.Q6J("disabled",r.uploading),e.xp6(6),e.Q6J("formGroup",r.updateForm),e.xp6(5),e.Q6J("ngIf",(null==(l=r.updateForm.get("nombre"))?null:l.hasError("minlength"))&&(null==(l=r.updateForm.get("nombre"))?null:l.touched)),e.xp6(1),e.Q6J("ngIf",(null==(a=r.updateForm.get("nombre"))?null:a.hasError("maxlength"))&&(null==(a=r.updateForm.get("nombre"))?null:a.touched)),e.xp6(1),e.Q6J("ngIf",(null==(u=r.updateForm.get("nombre"))?null:u.hasError("pattern"))&&(null==(u=r.updateForm.get("nombre"))?null:u.touched)),e.xp6(5),e.Q6J("ngIf",(null==(d=r.updateForm.get("apellido"))?null:d.hasError("minlength"))&&(null==(d=r.updateForm.get("apellido"))?null:d.touched)),e.xp6(1),e.Q6J("ngIf",(null==(p=r.updateForm.get("apellido"))?null:p.hasError("maxlength"))&&(null==(p=r.updateForm.get("apellido"))?null:p.touched)),e.xp6(1),e.Q6J("ngIf",(null==(f=r.updateForm.get("apellido"))?null:f.hasError("pattern"))&&(null==(f=r.updateForm.get("apellido"))?null:f.touched)),e.xp6(5),e.Q6J("ngIf",(null==(v=r.updateForm.get("telefono"))?null:v.hasError("pattern"))&&(null==(v=r.updateForm.get("telefono"))?null:v.touched)),e.xp6(5),e.Q6J("ngIf",(null==(h=r.updateForm.get("nit"))?null:h.hasError("pattern"))&&(null==(h=r.updateForm.get("nit"))?null:h.touched)),e.xp6(5),e.Q6J("ngForOf",r.departments),e.xp6(7),e.Q6J("ngForOf",r.municipalities),e.xp6(7),e.Q6J("ngIf",(null==(_=r.updateForm.get("direccion"))?null:_.hasError("pattern"))&&(null==(_=r.updateForm.get("direccion"))?null:_.touched)),e.xp6(1),e.Q6J("ngIf",(null==(b=r.updateForm.get("direccion"))?null:b.hasError("minlength"))&&(null==(b=r.updateForm.get("direccion"))?null:b.touched)),e.xp6(1),e.Q6J("ngIf",(null==(Z=r.updateForm.get("direccion"))?null:Z.hasError("maxlength"))&&(null==(Z=r.updateForm.get("direccion"))?null:Z.touched))}},dependencies:[m.sg,m.O5,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.EJ,i.JJ,i.JL,i.wO,i.nD,i.sg,i.u,i.F,T.w,C.c]}),o})();var $=s(3809),K=s(3650);function R(o,n){1&o&&(e.TgZ(0,"div",9)(1,"div",10)(2,"h5"),e._uU(3," No posees ning\xfan producto en favoritos, intenta agregar unos. "),e.qZA(),e._UZ(4,"img",11),e.qZA()())}function V(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,a=e.oxw();return e.KtG(a.addProductCart(l.producto.id))}),e._UZ(1,"i",30),e.qZA()}}function B(o,n){1&o&&(e.TgZ(0,"button",31),e._UZ(1,"i",30),e.qZA())}const U=function(o){return["/product/detail",o]};function H(o,n){if(1&o&&(e.TgZ(0,"button",32),e._UZ(1,"i",33),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,U,t.producto.id))}}function G(o,n){1&o&&(e.TgZ(0,"button",31),e._UZ(1,"i",33),e.qZA())}function X(o,n){if(1&o&&(e.TgZ(0,"a",34),e._uU(1,"Ver detalles"),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,U,t.producto.id))}}function W(o,n){1&o&&(e.TgZ(0,"button",35),e._uU(1,"Agotado"),e.qZA())}function ee(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"div",14),e._UZ(3,"img",15),e.TgZ(4,"div",16),e.YNc(5,V,2,0,"button",17),e.YNc(6,B,2,0,"button",18),e.TgZ(7,"button",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.deleteFavoriteProduct(a.id))}),e._UZ(8,"i",20),e.qZA(),e.YNc(9,H,2,3,"button",21),e.YNc(10,G,2,0,"button",18),e.qZA()(),e.TgZ(11,"div",22)(12,"a",23)(13,"h4"),e._uU(14),e.qZA()(),e.TgZ(15,"h5"),e._uU(16),e.qZA(),e.TgZ(17,"div",24)(18,"h5",25),e._uU(19),e.qZA(),e.TgZ(20,"h6",26)(21,"del"),e._uU(22),e.qZA()()(),e.TgZ(23,"div",27),e.YNc(24,X,2,3,"a",28),e.YNc(25,W,2,0,"button",29),e.qZA()()()()}if(2&o){const t=n.$implicit;e.xp6(5),e.Q6J("ngIf",t.producto.Cantidad_Stock>0),e.xp6(1),e.Q6J("ngIf",0==t.producto.Cantidad_Stock),e.xp6(3),e.Q6J("ngIf",t.producto.Cantidad_Stock>0),e.xp6(1),e.Q6J("ngIf",0==t.producto.Cantidad_Stock),e.xp6(2),e.Q6J("routerLink",e.VKq(11,U,t.id)),e.xp6(2),e.Oqu(t.producto.Nombre_Producto),e.xp6(2),e.hij("Cantidad disponible: ",t.producto.Cantidad_Stock,""),e.xp6(3),e.hij("Q",t.producto.Precio_Venta,""),e.xp6(3),e.hij("Q",t.producto.Precio_Venta,""),e.xp6(2),e.Q6J("ngIf",t.producto.Cantidad_Stock>0),e.xp6(1),e.Q6J("ngIf",0==t.producto.Cantidad_Stock)}}const te=[{path:"",redirectTo:"profile",pathMatch:"full"},{path:"profile",component:w},{path:"profile/update",component:j},{path:"profile/favorite/products",component:(()=>{class o{constructor(t,r,l,a){this.authService=t,this.productService=r,this.shoppingCartService=l,this.customAlertService=a,this.product=[],this.noneProducts=!1}ngOnInit(){this.getFavoriteProducts()}getFavoriteProducts(){if(!this.authService.isAuthenticated())return this.customAlertService.sweetAlertPersonalizada("error","Sin autenticaci\xf3n","Para obtener los products favoritos primero debes de iniciar sesi\xf3n.");this.productService.getFavoriteProducts(`${c.Q}/usuario/ver/productos/favorito`).subscribe({next:t=>{this.product=t.favoriteProduct,this.product=this.product.filter(r=>"Activo"===r.producto.estado.Tipo_Estado),this.noneProducts=!0},error:t=>{this.product=[],this.noneProducts=!1}})}deleteFavoriteProduct(t){try{if(!this.authService.isAuthenticated())return this.customAlertService.sweetAlertPersonalizada("error","Sin autenticaci\xf3n","Para eliminar un producto de favoritos primero debes de iniciar sesi\xf3n.");this.productService.deleteFavoriteProduct(`${c.Q}/usuario/eliminar/producto/favorito`,t).subscribe({next:r=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",r.msg),this.getFavoriteProducts()},error:r=>{this.customAlertService.sweetAlertPersonalizada("error","Error",r.error.error)}})}catch(r){console.log(r.error)}}addProductCart(t){try{if(!this.authService.isAuthenticated())return this.customAlertService.sweetAlertPersonalizada("error","Sin autenticaci\xf3n","Para agregar un producto al carrito primero debes de iniciar sesi\xf3n.");this.shoppingCartService.addProductCart(`${c.Q}/usuario/carrito/agregar`,{ID_Producto_FK:t,Cantidad_Producto:1}).subscribe({next:l=>{this.customAlertService.sweetAlertPersonalizada("success","Exitoso",l.msg),this.getFavoriteProducts()},error:l=>{this.customAlertService.sweetAlertPersonalizada("error","Error",l.error.error)}})}catch(r){console.log(r.error)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.e),e.Y36($.M),e.Y36(K.F),e.Y36(P.y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-favorite-products"]],decls:13,vars:2,consts:[[1,"container-fluid","pt-5","pb-3"],[1,"mx-xl-5","mb-4","text-center"],[1,"col-md-12","mb-5","d-flex","justify-content-center","mt-4"],["role","search",1,"d-flex"],["type","search","placeholder","Bucar producto","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"],[1,"row","px-xl-5"],["class","row justify-content-center align-items-center",4,"ngIf"],["class","col-lg-3 col-md-4 col-sm-6 pb-1",4,"ngFor","ngForOf"],[1,"row","justify-content-center","align-items-center"],[1,"col-12","text-center"],["width","300","height","300","src","assets/404.jpg","alt","Error 404",1,"img-fluid","rounded-circle"],[1,"col-lg-3","col-md-4","col-sm-6","pb-1"],[1,"product-item","bg-light","mb-4"],[1,"product-img","position-relative","overflow-hidden"],["src","assets/Logo_ASIA_DEPOT.png","alt","Logo productos ASIA DEPOT",1,"img-fluid","w-100"],[1,"product-action"],["class","btn btn-outline-dark btn-square",3,"click",4,"ngIf"],["class","btn btn-outline-dark btn-square","disabled","",4,"ngIf"],[1,"btn","btn-outline-dark","btn-square",3,"click"],[1,"fa","fa-heart"],["class","btn btn-outline-dark btn-square",3,"routerLink",4,"ngIf"],[1,"text-center","py-4"],[1,"text-decoration-none","text-truncate","productName",3,"routerLink"],[1,"d-flex","align-items-center","justify-content-center","mt-2"],[2,"margin-right","6px"],[1,"text-muted","ml-2"],[1,"container-btn"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],["class","btn btn-danger","disabled","",4,"ngIf"],[1,"fa","fa-shopping-cart"],["disabled","",1,"btn","btn-outline-dark","btn-square"],[1,"btn","btn-outline-dark","btn-square",3,"routerLink"],[1,"fa","fa-search"],[1,"btn","btn-primary",3,"routerLink"],["disabled","",1,"btn","btn-danger"]],template:function(t,r){1&t&&(e._UZ(0,"app-nav-bar"),e.TgZ(1,"div",0)(2,"h1",1),e._uU(3,"Productos Favoritos"),e.qZA(),e.TgZ(4,"div",2)(5,"form",3),e._UZ(6,"input",4),e.TgZ(7,"button",5),e._uU(8,"Buscar"),e.qZA()()(),e.TgZ(9,"div",6),e.YNc(10,R,5,0,"div",7),e.YNc(11,ee,26,13,"div",8),e.qZA()(),e._UZ(12,"app-footer")),2&t&&(e.xp6(10),e.Q6J("ngIf",0==r.noneProducts),e.xp6(1),e.Q6J("ngForOf",r.product))},dependencies:[m.sg,m.O5,i._Y,i.JL,i.F,g.rH,T.w,C.c],styles:[".product-item[_ngcontent-%COMP%]{transition:.5s}.product-action[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;align-items:center;justify-content:center;transition:.5s}.product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{position:relative;margin:100px 3px 0;opacity:0}.product-item[_ngcontent-%COMP%]:hover{box-shadow:0 0 30px #ddd}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]{background:rgba(255,255,255,.7)}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:first-child{opacity:1;margin-top:0;transition:.3s 0s}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:nth-child(2){opacity:1;margin-top:0;transition:.3s .05s}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:nth-child(3){opacity:1;margin-top:0;transition:.3s .1s}.product-item[_ngcontent-%COMP%]:hover   .product-action[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]:nth-child(4){opacity:1;margin-top:0;transition:.3s .15s}.product-item[_ngcontent-%COMP%]   .product-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:.5s}.product-item[_ngcontent-%COMP%]:hover   .product-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.2)}.productName[_ngcontent-%COMP%]{color:#000}.container-btn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{font-weight:700}.text-primary[_ngcontent-%COMP%]{color:#ffd333!important}"]}),o})()}];let re=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(te),g.Bz]}),o})();var oe=s(335);let ie=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,i.UX,i.u5,re,oe.d]}),o})()}}]);